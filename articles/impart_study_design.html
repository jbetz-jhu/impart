<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="impart">
<title>1. Planning Information Monitored Designs with `impart` • impart</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="1. Planning Information Monitored Designs with `impart`">
<meta property="og:description" content="impart">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">impart</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/impart_analyses.html">3. Performing Monitored Analyses with `impart`</a>
    <a class="dropdown-item" href="../articles/impart_monitoring.html">2. Monitoring Information with `impart`</a>
    <a class="dropdown-item" href="../articles/impart_study_design.html">1. Planning Information Monitored Designs with `impart`</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>1. Planning Information Monitored Designs with `impart`</h1>
            
      
      
      <div class="d-none name"><code>impart_study_design.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jbetz-jhu.github.io/impart/">impart</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/heliosdrm/pwr" class="external-link">pwr</a></span><span class="op">)</span> <span class="co"># Only required for examples, not for `impart`</span></span></code></pre></div>
<div class="section level2">
<h2 id="planning-the-study">Planning The Study<a class="anchor" aria-label="anchor" href="#planning-the-study"></a>
</h2>
<p>Planning information-monitored study is similar in many respects to
planning a fixed-sample size study. Investigators decide on an effect
size that is meaningful in magnitude, and decide on the appropriate Type
I Error Rate, statistical power, and direction of alternatives of
interest:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Universal Study Design Parameters</span></span>
<span><span class="va">minimum_difference</span> <span class="op">&lt;-</span> <span class="fl">5</span> <span class="co"># Effect Size: Difference in Means of 5 or greater</span></span>
<span><span class="va">alpha</span> <span class="op">&lt;-</span> <span class="fl">0.05</span> <span class="co"># Type I Error Rate</span></span>
<span><span class="va">power</span> <span class="op">&lt;-</span> <span class="fl">0.9</span> <span class="co"># Statistical Power</span></span>
<span><span class="va">test_sides</span> <span class="op">&lt;-</span> <span class="fl">2</span> <span class="co"># Direction of Alternatives</span></span></code></pre></div>
<p>The amount of data that must be collected depends on the amount of
the information in the accruing data, with the information depending on
the patterns of associations among variables, variability in the
outcomes of interest, and degree of missingness. Such information is not
always available when studies are being planned in practice.</p>
<p>Fixed sample size designs require investigators make assumptions
about the factors affecting precision: when such assumptions are
incorrect, studies can be over- or under-powered. Rather than planning
data collection until a pre-specified sample size is reached, an
information-monitored study continues data collection until the data
collected provide enough precision to identify a meaningful difference
with appropriate power and control of Type I Error.</p>
<div class="section level3">
<h3 id="determining-the-target-information-level">Determining the Target Information Level<a class="anchor" aria-label="anchor" href="#determining-the-target-information-level"></a>
</h3>
<p>The information or precision required to achieve power <span class="math inline">\((1 - \beta)\)</span> to identify a treatment
effect <span class="math inline">\(\delta\)</span> with an <span class="math inline">\(s\)</span>-sided test with type I error rate <span class="math inline">\(\alpha\)</span> at the final analysis is given
by:</p>
<p><span class="math display">\[\mathcal{I}_{F} =
\left(\frac{Z_{\alpha/s} + Z_{\beta}}{\delta}\right)^2 \approx
\frac{1}{\left(SE(\hat{\delta})\right)^2} =
\frac{1}{Var(\hat{\delta})}\]</span></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Determine information required to achieve desired power at fixed error rate</span></span>
<span><span class="va">information_fixed</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">impart</span><span class="fu">::</span><span class="fu"><a href="../reference/required_info.html">required_information_fixed_n</a></span><span class="op">(</span></span>
<span>    delta <span class="op">=</span> <span class="va">minimum_difference</span>,</span>
<span>    alpha <span class="op">=</span> <span class="va">alpha</span>,</span>
<span>    power <span class="op">=</span> <span class="va">power</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">information_fixed</span></span>
<span><span class="co">#&gt; [1] 0.4202969</span></span></code></pre></div>
<p>For example, detecting a difference in means of 5 with 90% power and
a Type I Error rate of 0.05 using a 2-sided test requires an information
level of 0.4202969. Investigators can collect data until the precision
(the reciprocal of the square of the standard error) reaches this level,
and their analysis will have the appropriate power and Type I error
control.</p>
</div>
<div class="section level3">
<h3 id="translating-information-into-sample-size">Translating Information into Sample Size<a class="anchor" aria-label="anchor" href="#translating-information-into-sample-size"></a>
</h3>
<p>Translating information levels to a sample size requires making some
assumption about nuisance parameters, such as the variability of the
outcomes in each treatment arm. The
<code>information_to_n_continuous_1_to_1</code> function takes an
information level and values of the nuisance parameters, and gives an
approximate sample size. Note that this calculation only takes into
account the information contained in the observed outcomes: if some
outcomes are missing, or if the analysis makes use of information in
baseline covariates and intermediate outcomes, this can change the
sample size at which the target information level is reached.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Assume Equal Variances: 7.5</span></span>
<span><span class="va">approximate_n_sd_7.5</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">impart</span><span class="fu">::</span><span class="fu"><a href="../reference/information_to_n.html">information_to_n_continuous_1_to_1</a></span><span class="op">(</span></span>
<span>    information <span class="op">=</span> <span class="va">information_fixed</span>,</span>
<span>    sigma_0 <span class="op">=</span> <span class="fl">7.5</span>,</span>
<span>    sigma_1 <span class="op">=</span> <span class="fl">7.5</span>,</span>
<span>    round_up <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">approximate_n_sd_7.5</span></span>
<span><span class="co">#&gt;   n_per_arm n_total</span></span>
<span><span class="co">#&gt; 1        48      96</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Compute Power: Fixed Sample Size</span></span>
<span><span class="fu">pwr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pwr/man/pwr.t.test.html" class="external-link">pwr.t.test</a></span><span class="op">(</span></span>
<span>  d <span class="op">=</span> <span class="va">minimum_difference</span><span class="op">/</span><span class="fl">7.5</span>,</span>
<span>  sig.level <span class="op">=</span> <span class="va">alpha</span>,</span>
<span>  power <span class="op">=</span> <span class="va">power</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;      Two-sample t test power calculation </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;               n = 48.26427</span></span>
<span><span class="co">#&gt;               d = 0.6666667</span></span>
<span><span class="co">#&gt;       sig.level = 0.05</span></span>
<span><span class="co">#&gt;           power = 0.9</span></span>
<span><span class="co">#&gt;     alternative = two.sided</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; NOTE: n is number in *each* group</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Equal Variances: 10</span></span>
<span><span class="va">approximate_n_sd_10</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">impart</span><span class="fu">::</span><span class="fu"><a href="../reference/information_to_n.html">information_to_n_continuous_1_to_1</a></span><span class="op">(</span></span>
<span>    information <span class="op">=</span> <span class="va">information_fixed</span>,</span>
<span>    sigma_0 <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    sigma_1 <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    round_up <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">approximate_n_sd_10</span></span>
<span><span class="co">#&gt;   n_per_arm n_total</span></span>
<span><span class="co">#&gt; 1        85     170</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Compute Power: Fixed Sample Size</span></span>
<span><span class="fu">pwr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pwr/man/pwr.t.test.html" class="external-link">pwr.t.test</a></span><span class="op">(</span></span>
<span>  d <span class="op">=</span> <span class="va">minimum_difference</span><span class="op">/</span><span class="fl">10</span>,</span>
<span>  sig.level <span class="op">=</span> <span class="va">alpha</span>,</span>
<span>  power <span class="op">=</span> <span class="va">power</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;      Two-sample t test power calculation </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;               n = 85.03128</span></span>
<span><span class="co">#&gt;               d = 0.5</span></span>
<span><span class="co">#&gt;       sig.level = 0.05</span></span>
<span><span class="co">#&gt;           power = 0.9</span></span>
<span><span class="co">#&gt;     alternative = two.sided</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; NOTE: n is number in *each* group</span></span></code></pre></div>
<p>Note that under specific assumptions about the standard deviations in
the populations are met, the sample size requirements determined using a
fixed sample size design (<code><a href="https://rdrr.io/pkg/pwr/man/pwr.t.test.html" class="external-link">pwr::pwr.t.test</a></code>) or an
information-monitored design
(<code>information_to_n_continuous_1_to_1</code>) are the same. The
advantage of an information-adaptive design is the sample size adapts to
the information in the accruing data: rather than making assumptions
about the standard deviations in each population, which could result in
an over- or under-powered trial, data collection proceeds until the
target information level is met, which ensures adequate power and Type I
Error control.</p>
</div>
<div class="section level3">
<h3 id="sequential-analyses-in-studies">Sequential Analyses in Studies<a class="anchor" aria-label="anchor" href="#sequential-analyses-in-studies"></a>
</h3>
<p>If the true effect of interest is greater than the minimum meaningful
effect <span class="math inline">\(\delta\)</span>, the study may still
be overpowered. Conversely, if the true effect is very small, or
indicates that the benefits of participating in the study are not
commensurate with risks, it may be futile to continue data collection.
In such cases, interim analyses of the data can be used to guide more
ethical, cost-effective data collection.</p>
<p>Group-Sequential Designs allow investigators to control Type I Error
rates when performing pre-specified interim assessments of the
differences between groups. Studies can also be stopped early for
futility if accruing data suggest that a treatment is ineffective or
harmful. The number and timing of analyses must be pre-specified, as
well as the rules for stopping for efficacy and futility. The stopping
rules are specified using ‘spending functions:’ alpha spending functions
define efficacy stopping rules, and beta spending functions define
futility stopping rules. For more information on group sequential
designs, see <a href="https://www.rpact.org" class="external-link">the documentation for the
<code>RPACT</code> package</a>. This example will utilize the
O’Brien-Fleming stopping rules for efficacy and futility.</p>
<p>In contrast to a group sequential design, which performs analyses at
pre-specified fractions of the final sample size, an
information-monitored study performs analyses when the data collected
provide enough precision to identify a treatment effect with the
appropriate power and Type I Error. Analyses are conducted when the
precision reaches pre-specified fractions of this level of
precision.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Group Sequential Design Parameters</span></span>
<span><span class="va">information_rates</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.50</span>, <span class="fl">0.75</span>, <span class="fl">1.00</span><span class="op">)</span> <span class="co"># Analyses at 50%, 75%, and 100% of the Total Information</span></span>
<span><span class="va">type_of_design</span> <span class="op">&lt;-</span> <span class="st">"asOF"</span> <span class="co"># O'Brien-Fleming Alpha Spending</span></span>
<span><span class="va">type_beta_spending</span> <span class="op">&lt;-</span> <span class="st">"bsOF"</span> <span class="co"># O'Brien-Fleming Beta Spending</span></span></code></pre></div>
<p>The <code>getDesignGroupSequential</code> function in the
<code>rpact</code> library can be used to specify the appropriate study
design. For example, a two-sided test comparing <span class="math inline">\(H_{0}: \mu_{T} - \mu_{C} = \delta_{0}\)</span>
vs. <span class="math inline">\(H_{A}: \mu_{T} - \mu_{C} \neq
\delta_{0}\)</span></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set up group sequential testing procedure</span></span>
<span><span class="va">trial_design</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">rpact</span><span class="fu">::</span><span class="fu"><a href="https://rpact-com.github.io/rpact/reference/getDesignGroupSequential.html" class="external-link">getDesignGroupSequential</a></span><span class="op">(</span></span>
<span>    alpha <span class="op">=</span> <span class="va">alpha</span>,</span>
<span>    beta <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">power</span>,</span>
<span>    sided <span class="op">=</span> <span class="fl">2</span>,</span>
<span>    informationRates <span class="op">=</span> <span class="va">information_rates</span>,</span>
<span>    typeOfDesign <span class="op">=</span> <span class="va">type_of_design</span>,</span>
<span>    typeBetaSpending <span class="op">=</span> <span class="va">type_beta_spending</span>,</span>
<span>    bindingFutility <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>For a one-sided test using RPACT, the default boundaries assume users
are testing <span class="math inline">\(H_{0}: \mu_{T} - \mu_{C} &lt;
\delta_{0}\)</span> vs. <span class="math inline">\(H_{A}: \mu_{T} -
\mu_{C} \ge \delta_{0}\)</span>:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># One sided test: Higher values = Better</span></span>
<span><span class="va">trial_design_one_sided_upper</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">rpact</span><span class="fu">::</span><span class="fu"><a href="https://rpact-com.github.io/rpact/reference/getDesignGroupSequential.html" class="external-link">getDesignGroupSequential</a></span><span class="op">(</span></span>
<span>    alpha <span class="op">=</span> <span class="va">alpha</span>,</span>
<span>    beta <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">power</span>,</span>
<span>    sided <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    informationRates <span class="op">=</span> <span class="va">information_rates</span>,</span>
<span>    typeOfDesign <span class="op">=</span> <span class="va">type_of_design</span>,</span>
<span>    typeBetaSpending <span class="op">=</span> <span class="va">type_beta_spending</span>,</span>
<span>    bindingFutility <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">trial_design_one_sided_upper</span>,</span>
<span>  main <span class="op">=</span> <span class="st">"One-Sided: Higher Z = Superior"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="../reference/figures/Specify-One-Sided-Sequential-Design-Procedure-1.png" width="80%" style="display: block; margin: auto;"></p>
<p>Users must <a href="https://github.com/rpact-com/rpact/issues/26" class="external-link">must manually
correct the resulting design boundaries</a> to test <span class="math inline">\(H_{0}: \mu_{T} - \mu_{C} &gt; \delta_{0}\)</span>
vs. <span class="math inline">\(H_{A}: \mu_{T} - \mu_{C} \le
\delta_{0}\)</span>. Until this correction is made,
<code><a href="../reference/correct_one_sided_gsd.html">correct_one_sided_gsd()</a></code> should be called on the result,
which corrects the futility and efficacy boundaries:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">trial_design_one_sided_lower</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/correct_one_sided_gsd.html">correct_one_sided_gsd</a></span><span class="op">(</span></span>
<span>    trial_design <span class="op">=</span> <span class="va">trial_design_one_sided_upper</span>,</span>
<span>    higher_better <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">trial_design_one_sided_lower</span>,</span>
<span>  main <span class="op">=</span> <span class="st">"Corrected One-Sided: Lower Z = Superior"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="../reference/figures/Correct-RPACT-One-Sided-Boundaries-1.png" width="80%" style="display: block; margin: auto;"></p>
<p>Once this issue is resolved, users can specify the direction using
the <code>directionUpper</code> argument in other RPACT functions:</p>
<ul>
<li>
<code>directionUpper = TRUE</code> tests <span class="math inline">\(H_{0}: \mu_{T} - \mu_{C} &lt; \delta_{0}\)</span>
vs. <span class="math inline">\(H_{A}: \mu_{T} - \mu_{C} \ge
\delta_{0}\)</span>
</li>
<li>
<code>directionUpper = FALSE</code> tests <span class="math inline">\(H_{0}: \mu_{T} - \mu_{C} &gt; \delta_{0}\)</span>
vs. <span class="math inline">\(H_{A}: \mu_{T} - \mu_{C} \le
\delta_{0}\)</span>
</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># One sided test: Higher values = Better</span></span>
<span><span class="va">trial_design_one_sided_higher</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">rpact</span><span class="fu">::</span><span class="fu"><a href="https://rpact-com.github.io/rpact/reference/getDesignGroupSequential.html" class="external-link">getDesignGroupSequential</a></span><span class="op">(</span></span>
<span>    alpha <span class="op">=</span> <span class="va">alpha</span>,</span>
<span>    beta <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">power</span>,</span>
<span>    sided <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    informationRates <span class="op">=</span> <span class="va">information_rates</span>,</span>
<span>    typeOfDesign <span class="op">=</span> <span class="va">type_of_design</span>,</span>
<span>    typeBetaSpending <span class="op">=</span> <span class="va">type_beta_spending</span>,</span>
<span>    bindingFutility <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    directionUpper <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># One sided test: Lower values = Better</span></span>
<span><span class="va">trial_design_one_sided_lower</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">rpact</span><span class="fu">::</span><span class="fu"><a href="https://rpact-com.github.io/rpact/reference/getDesignGroupSequential.html" class="external-link">getDesignGroupSequential</a></span><span class="op">(</span></span>
<span>    alpha <span class="op">=</span> <span class="va">alpha</span>,</span>
<span>    beta <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">power</span>,</span>
<span>    sided <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    informationRates <span class="op">=</span> <span class="va">information_rates</span>,</span>
<span>    typeOfDesign <span class="op">=</span> <span class="va">type_of_design</span>,</span>
<span>    typeBetaSpending <span class="op">=</span> <span class="va">type_beta_spending</span>,</span>
<span>    directionUpper <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="adjusting-information-for-multiple-analyses">Adjusting Information for Multiple Analyses<a class="anchor" aria-label="anchor" href="#adjusting-information-for-multiple-analyses"></a>
</h3>
<p>When doing sequential analyses in an information-monitored design,
the target level of information must be adjusted:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Inflate information level to account for multiple testing</span></span>
<span><span class="va">information_adaptive</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">impart</span><span class="fu">::</span><span class="fu"><a href="../reference/required_information_sequential.html">required_information_sequential</a></span><span class="op">(</span></span>
<span>    information_fixed <span class="op">=</span> <span class="va">information_fixed</span>,</span>
<span>    trial_design <span class="op">=</span> <span class="va">trial_design</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">information_adaptive</span></span>
<span><span class="co">#&gt; [1] 0.4558286</span></span></code></pre></div>
<p>The information required under the specified design is 0.4558286,
which is scaled up by the inflation factor mentioned in the summary of
the design (1.0845394). This can be retrieved using
<code>rpact::getDesignCharacteristics(trial_design)</code>.</p>
</div>
<div class="section level3">
<h3 id="including-covariate-information">Including Covariate Information<a class="anchor" aria-label="anchor" href="#including-covariate-information"></a>
</h3>
<p>Appropriately including information from covariates has the potential
to increase the precision of analyses, meaning that target information
levels can be reached at lower sample sizes, resulting in studies with
shorter duration.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Information Only From Final Outcomes</span></span>
<span><span class="fu">impart</span><span class="fu">::</span><span class="fu"><a href="../reference/information_to_n.html">information_to_n_continuous_1_to_1</a></span><span class="op">(</span></span>
<span>    information <span class="op">=</span> <span class="va">information_rates</span><span class="op">*</span><span class="va">information_adaptive</span>,</span>
<span>    sigma_0 <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    sigma_1 <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    round_up <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt;   information sigma_0 sigma_1 n_per_arm   n_total</span></span>
<span><span class="co">#&gt; 1   0.2279143      10      10  45.58286  91.16572</span></span>
<span><span class="co">#&gt; 2   0.3418714      10      10  68.37429 136.74858</span></span>
<span><span class="co">#&gt; 3   0.4558286      10      10  91.16572 182.33143</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 10% Relative Efficiency Increase from Covariates</span></span>
<span><span class="va">relative_efficiency</span> <span class="op">&lt;-</span> <span class="fl">1.1</span></span>
<span><span class="co"># Information From Final Outcomes + Covariates</span></span>
<span><span class="fu">impart</span><span class="fu">::</span><span class="fu"><a href="../reference/information_to_n.html">information_to_n_continuous_1_to_1</a></span><span class="op">(</span></span>
<span>  information <span class="op">=</span> <span class="va">information_rates</span><span class="op">*</span><span class="va">information_adaptive</span><span class="op">/</span><span class="va">relative_efficiency</span>,</span>
<span>  sigma_0 <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  sigma_1 <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  round_up <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt;   information sigma_0 sigma_1 n_per_arm n_total</span></span>
<span><span class="co">#&gt; 1   0.2071948      10      10        42      84</span></span>
<span><span class="co">#&gt; 2   0.3107922      10      10        63     126</span></span>
<span><span class="co">#&gt; 3   0.4143896      10      10        83     166</span></span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 20% Relative Efficiency Increase from Covariates</span></span>
<span><span class="va">relative_efficiency</span> <span class="op">&lt;-</span> <span class="fl">1.2</span></span>
<span><span class="co"># Information From Final Outcomes + Covariates</span></span>
<span><span class="fu">impart</span><span class="fu">::</span><span class="fu"><a href="../reference/information_to_n.html">information_to_n_continuous_1_to_1</a></span><span class="op">(</span></span>
<span>  information <span class="op">=</span> <span class="va">information_rates</span><span class="op">*</span><span class="va">information_adaptive</span><span class="op">/</span><span class="va">relative_efficiency</span>,</span>
<span>  sigma_0 <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  sigma_1 <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  round_up <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt;   information sigma_0 sigma_1 n_per_arm n_total</span></span>
<span><span class="co">#&gt; 1   0.1899286      10      10        38      76</span></span>
<span><span class="co">#&gt; 2   0.2848929      10      10        57     114</span></span>
<span><span class="co">#&gt; 3   0.3798572      10      10        76     152</span></span></code></pre></div>
<p>The increase in precision from covariate adjustment is never known
precisely during the planning of a study. Instead of relying on an
assumption about the gain in precision from covariates, investigators
can use information monitoring to adapt data collection to the accruing
information from both covariates and outcomes.</p>
</div>
<div class="section level3">
<h3 id="encapsulating-study-design">Encapsulating Study Design<a class="anchor" aria-label="anchor" href="#encapsulating-study-design"></a>
</h3>
<p>A <code>monitored_design</code> object encapsulates all of the
information about an information monitored study that should be fixed at
the outset, including the number of analyses, the information fractions
at which analyses are conducted, the target level of information, the
null value of the estimand of interest, the maximum feasible sample
size, and the pseudorandom number generator seed which is used for
analyses.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Initialize the monitored design</span></span>
<span><span class="va">monitored_design</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/initialize_monitored_design.html">initialize_monitored_design</a></span><span class="op">(</span></span>
<span>    trial_design <span class="op">=</span> <span class="va">trial_design</span>,</span>
<span>    null_value <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    maximum_sample_size <span class="op">=</span> <span class="fl">280</span>,</span>
<span>    information_target <span class="op">=</span> <span class="va">information_adaptive</span>,</span>
<span>    orthogonalize <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    rng_seed_analysis <span class="op">=</span> <span class="fl">54321</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">monitored_design</span></span>
<span><span class="co">#&gt; $original_design</span></span>
<span><span class="co">#&gt; $original_design$trial_design</span></span>
<span><span class="co">#&gt; *Design parameters and output of group sequential design*</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; *User defined parameters*</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; * *Type of design*: O'Brien &amp; Fleming type alpha spending </span></span>
<span><span class="co">#&gt; * *Information rates*: 0.500, 0.750, 1.000 </span></span>
<span><span class="co">#&gt; * *Significance level*: 0.0500 </span></span>
<span><span class="co">#&gt; * *Type II error rate*: 0.1000 </span></span>
<span><span class="co">#&gt; * *Test*: two-sided </span></span>
<span><span class="co">#&gt; * *Type of beta spending*: O'Brien &amp; Fleming type beta spending </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; *Derived from user defined parameters*</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; * *Maximum number of stages*: 3 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; *Default parameters*</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; * *Stages*: 1, 2, 3 </span></span>
<span><span class="co">#&gt; * *Two-sided power*: FALSE </span></span>
<span><span class="co">#&gt; * *Binding futility*: FALSE </span></span>
<span><span class="co">#&gt; * *Beta adjustment*: TRUE </span></span>
<span><span class="co">#&gt; * *Tolerance*: 1e-08 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; *Output*</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; * *Power*: 0.2825, 0.7164, 0.9000 </span></span>
<span><span class="co">#&gt; * *Futility bounds (non-binding)*: 0.387, 1.282 </span></span>
<span><span class="co">#&gt; * *Cumulative alpha spending*: 0.003051, 0.019299, 0.050000 </span></span>
<span><span class="co">#&gt; * *Cumulative beta spending*: 0.02001, 0.05752, 0.10000 </span></span>
<span><span class="co">#&gt; * *Critical values*: 2.963, 2.359, 2.014 </span></span>
<span><span class="co">#&gt; * *Stage levels (one-sided)*: 0.001525, 0.009162, 0.022000 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $original_design$maximum_sample_size</span></span>
<span><span class="co">#&gt; [1] 280</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $original_design$null_value</span></span>
<span><span class="co">#&gt; [1] 0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $original_design$information_target</span></span>
<span><span class="co">#&gt; [1] 0.4558286</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $original_design$orthogonalize</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $original_design$rng_seed_analysis</span></span>
<span><span class="co">#&gt; [1] 54321</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attr(,"class")</span></span>
<span><span class="co">#&gt; [1] "monitored_design"</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Kelly Van Lancker, Josh Betz, Michael Rosenblum.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
