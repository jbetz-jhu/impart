<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Designing Information Monitored Trials for Time-to-Event Outcomes • impart</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Designing Information Monitored Trials for Time-to-Event Outcomes">
<meta name="description" content="How to design an information monitored randomized trial for time-to-event outcomes
">
<meta property="og:description" content="How to design an information monitored randomized trial for time-to-event outcomes
">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">impart</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/impart.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Information Monitoring - Continuous Outcomes</h6></li>
    <li><a class="dropdown-item" href="../articles/design_continuous.html">Designing Information Monitored Trials for Continuous Outcomes</a></li>
    <li><a class="dropdown-item" href="../articles/monitoring_continuous.html">Monitoring Information for a Continuous Outcome</a></li>
    <li><a class="dropdown-item" href="../articles/analyses_continuous.html">Monitored Analyses for a Continuous Outcome</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Information Monitoring - Binary Outcomes</h6></li>
    <li><a class="dropdown-item" href="../articles/design_binary.html">Designing Information Monitored Trials for Binary Outcomes</a></li>
    <li><a class="dropdown-item" href="../articles/monitoring_binary.html">Monitoring Information for a Binary Outcome</a></li>
    <li><a class="dropdown-item" href="../articles/analyses_binary.html">Monitored Analyses for a Binary Outcome</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Information Monitoring - Time-to-Event Outcomes</h6></li>
    <li><a class="dropdown-item" href="../articles/design_time_to_event.html">Designing Information Monitored Trials for Time-to-Event Outcomes</a></li>
    <li><a class="dropdown-item" href="../articles/monitoring_time_to_event.html">Monitoring Information for a Time-to-Event Outcome</a></li>
    <li><a class="dropdown-item" href="../articles/analyses_time_to_event.html">Monitored Analyses for a Time-to-Event Outcome</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Additional Vignettes</h6></li>
    <li><a class="dropdown-item" href="../articles/analyses_group_sequential.html">Covariate Adjustment in Group Sequential Designs</a></li>
    <li><a class="dropdown-item" href="../articles/new_methods_in_impart.html">Implementing New Methods in `impart`</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Plans &amp; Specifications</h6></li>
    <li><a class="dropdown-item" href="../articles/plan_requirements.html">Software Requirements Specification</a></li>
    <li><a class="dropdown-item" href="../articles/plan_quality.html">Software Quality &amp; Management Plan</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jbetz-jhu/impart/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Designing Information Monitored Trials for Time-to-Event Outcomes</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/jbetz-jhu/impart/blob/main/vignettes/design_time_to_event.Rmd" class="external-link"><code>vignettes/design_time_to_event.Rmd</code></a></small>
      <div class="d-none name"><code>design_time_to_event.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jbetz-jhu.github.io/impart/">impart</a></span><span class="op">)</span> </span></code></pre></div>
<div class="section level2">
<h2 id="planning-the-study">Planning The Study<a class="anchor" aria-label="anchor" href="#planning-the-study"></a>
</h2>
<p>Planning an information-monitored study is similar in many respects
to planning a study with a fixed sample size. Investigators must decide
on <a href="https://covariateadjustment.github.io/estimands.html" class="external-link">the
target of statistical inference, also known as an estimand</a>: for a
time-to-event outcome, there are several outcomes that may be of
interest, including the survival probability (SP), the restricted mean
survival time (RMST), or hazard ratio (HR). Royston and Parmar (<span class="citation">[@Royston2011; @Royston2013]</span>) provide an
overview of RMST, with further practical considerations provided by
Eaton, Therneau, and Le-Rademacher <span class="citation">[@Eaton2020]</span>.</p>
<p>Once the estimand is chosen, decisions must be made about what
constitutes a meaningful effect size on the scale of the estimand. Next,
the characteristics of the testing procedure must be specified,
including the desired Type I Error Rate
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>α</mi><annotation encoding="application/x-tex">\alpha</annotation></semantics></math>),
statistical power
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>−</mo><mi>β</mi></mrow><annotation encoding="application/x-tex">1 - \beta</annotation></semantics></math>),
and the direction of alternatives of interest (an
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>s</mi><annotation encoding="application/x-tex">s</annotation></semantics></math>-sided
test: 1- or 2-sided):</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Universal Study Design Parameters</span></span>
<span><span class="va">minimum_difference_hr</span> <span class="op">&lt;-</span> <span class="fl">0.74</span> <span class="co"># Effect Size: Hazard Ratio</span></span>
<span><span class="va">minimum_difference_log_hr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">minimum_difference_hr</span><span class="op">)</span> </span>
<span><span class="va">minimum_difference_sp</span> <span class="op">&lt;-</span> <span class="fl">0.15</span> <span class="co"># Effect Size: Difference in Survival Probability</span></span>
<span><span class="va">minimum_difference_rmst</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="co"># Effect Size: Difference in RMST</span></span>
<span><span class="va">alpha</span> <span class="op">&lt;-</span> <span class="fl">0.05</span> <span class="co"># Type I Error Rate</span></span>
<span><span class="va">power</span> <span class="op">&lt;-</span> <span class="fl">0.9</span> <span class="co"># Statistical Power</span></span>
<span><span class="va">test_sides</span> <span class="op">&lt;-</span> <span class="fl">2</span> <span class="co"># Direction of Alternatives</span></span></code></pre></div>
<p>Additionally, if the goal is to assess the difference in survival
probability or average time being free of the event (RMST),
investigators need to specify a clinically meaningful time interval
known as the time horizon
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>τ</mi><annotation encoding="application/x-tex">\tau</annotation></semantics></math>).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Study Design Parameters: RMST &amp; Survival Probability</span></span>
<span><span class="va">time_horizon</span> <span class="op">&lt;-</span> <span class="fl">5</span></span></code></pre></div>
<p>For example:</p>
<ul>
<li>A 26% reduction in the hazard (a hazard ratio of 0.74, or a log
hazard ratio of -0.301)</li>
<li>A 15% absolute difference in survival probability at
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>τ</mi><annotation encoding="application/x-tex">\tau</annotation></semantics></math>
= 5 years</li>
<li>A difference in RMST of 1 year at
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>τ</mi><annotation encoding="application/x-tex">\tau</annotation></semantics></math>
= 5 years (20% increase in expected time being event-free)</li>
</ul>
<p>The amount of data that must be collected depends on the amount of
the information in the accruing data, with the information depending on
the patterns of associations between covariates, event times, and
censoring times. Such information is not always available when studies
are being planned in practice.</p>
<p>Sample size calculations for a continuous or binary outcome require
estimates of nuisance parameters, such as the variance of continuous
outcomes, or the risk of the outcome in the control arm. Power for the
logrank test depends on the number of events observed in both treatment
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>D</mi><mn>1</mn></msub><mo stretchy="true" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(D_{1})</annotation></semantics></math>
and control
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>D</mi><mn>0</mn></msub><mo stretchy="true" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(D_{0})</annotation></semantics></math>
arms <span class="citation">[@Schoenfeld1983]</span>. Let
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo>=</mo><msub><mi>D</mi><mn>1</mn></msub><mo>+</mo><msub><mi>D</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">D = D_{1} + D_{0}</annotation></semantics></math>
denote the total number of events in a trial with an allocation ratio of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>r</mi><annotation encoding="application/x-tex">r</annotation></semantics></math>
participants to treatment for every
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math>
participants allocated to control
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>:</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">r:1</annotation></semantics></math>
randomization). The power to detect a hazard ratio of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>θ</mi><msub><mi>H</mi><mi>A</mi></msub></msub><annotation encoding="application/x-tex">\theta_{H_{A}}</annotation></semantics></math>
with Type I error
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>α</mi><annotation encoding="application/x-tex">\alpha</annotation></semantics></math>
with an
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>s</mi><annotation encoding="application/x-tex">s</annotation></semantics></math>-sided
test after observing
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>D</mi><annotation encoding="application/x-tex">D</annotation></semantics></math>
events across both treatment arms is:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mo stretchy="true" form="prefix">(</mo><mn>1</mn><mo>−</mo><mi>β</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mi>Φ</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>θ</mi><msub><mi>H</mi><mi>A</mi></msub></msub><mo stretchy="true" form="postfix">)</mo></mrow><msqrt><mfrac><mrow><mi>r</mi><mi>D</mi></mrow><msup><mrow><mo stretchy="true" form="prefix">(</mo><mn>1</mn><mo>+</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup></mfrac></msqrt><mo>−</mo><msub><mi>Z</mi><mrow><mi>α</mi><mi>/</mi><mi>s</mi></mrow></msub><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">(1 - \beta) = \Phi\left( log(\theta_{H_{A}}) \sqrt{ \frac{rD}{(1 + r)^2} } - Z_{\alpha/s} \right)</annotation></semantics></math></p>
<p>Alternatively, to achieve power
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">(</mo><mn>1</mn><mo>−</mo><mi>β</mi><mo stretchy="true" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(1 - \beta)</annotation></semantics></math>
requires observing at least
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>D</mi><annotation encoding="application/x-tex">D</annotation></semantics></math>
total events, where:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo>=</mo><mfrac><msup><mrow><mo stretchy="true" form="prefix">(</mo><mn>1</mn><mo>+</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup><mi>r</mi></mfrac><msup><mrow><mo stretchy="true" form="prefix">(</mo><mfrac><mrow><msub><mi>Z</mi><mrow><mi>α</mi><mi>/</mi><mi>s</mi></mrow></msub><mo>+</mo><msub><mi>Z</mi><mi>β</mi></msub></mrow><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>θ</mi><msub><mi>H</mi><mi>A</mi></msub></msub><mo stretchy="true" form="postfix">)</mo></mrow></mrow></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">D = \frac{(1 + r)^2}{r}\left(\frac{Z_{\alpha/s} + Z_{\beta}}{log(\theta_{H_{A}})}\right)^{2}</annotation></semantics></math></p>
<p>Since the number of events observed depends on the distribution of
event times and censoring times, investigators must choose a sample size
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><msub><mi>N</mi><mn>1</mn></msub><mo>+</mo><msub><mi>N</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">N = N_{1} + N_{0}</annotation></semantics></math>
and minimum follow-up duration so that at least
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>D</mi><annotation encoding="application/x-tex">D</annotation></semantics></math>
events are observed across both treatment arms by the end of follow-up.
This is known as an <em>event driven trial</em>: precision and power
depend on the number of events observed, with recruitment and follow-up
duration adjusted to reach the specified level of precision.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Number of Events Required:</span></span>
<span><span class="va">required_events</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu">impart</span><span class="fu">::</span><span class="fu"><a href="../reference/hr_design.html">hr_design</a></span><span class="op">(</span></span>
<span>    hazard_ratio <span class="op">=</span> <span class="va">minimum_difference_hr</span>,</span>
<span>    power <span class="op">=</span> <span class="va">power</span>,</span>
<span>    alpha <span class="op">=</span> <span class="va">alpha</span>,</span>
<span>    test_sides <span class="op">=</span> <span class="va">test_sides</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">required_events</span></span>
<span><span class="co">#&gt; [1] 463.575</span></span></code></pre></div>
<p>Investigators would need to adjust the duration of follow-up, total
sample size, and recruitment rate in order to observe a total of 464
during the study period. Similarly, one can determine the power attained
after a certain number of events are observed.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">impart</span><span class="fu">::</span><span class="fu"><a href="../reference/hr_design.html">hr_design</a></span><span class="op">(</span></span>
<span>  events <span class="op">=</span> <span class="va">required_events</span><span class="op">*</span><span class="op">(</span><span class="fl">0.5</span><span class="op">)</span>, <span class="co"># Lower number of events observed</span></span>
<span>  hazard_ratio <span class="op">=</span> <span class="va">minimum_difference_hr</span>,</span>
<span>  alpha <span class="op">=</span> <span class="va">alpha</span>,</span>
<span>  test_sides <span class="op">=</span> <span class="va">test_sides</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.6301058</span></span>
<span></span>
<span><span class="fu">impart</span><span class="fu">::</span><span class="fu"><a href="../reference/hr_design.html">hr_design</a></span><span class="op">(</span></span>
<span>  events <span class="op">=</span> <span class="va">required_events</span>, <span class="co"># Lower number of events observed</span></span>
<span>  hazard_ratio <span class="op">=</span> <span class="va">minimum_difference_hr</span> <span class="op">+</span> <span class="fl">0.10</span>, <span class="co"># Lower reduction in hazard</span></span>
<span>  alpha <span class="op">=</span> <span class="va">alpha</span>,</span>
<span>  test_sides <span class="op">=</span> <span class="va">test_sides</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.4669334</span></span></code></pre></div>
<div class="section level3">
<h3 id="determining-the-target-information-level">Determining the Target Information Level<a class="anchor" aria-label="anchor" href="#determining-the-target-information-level"></a>
</h3>
<p>The information or precision required to achieve power
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">(</mo><mn>1</mn><mo>−</mo><mi>β</mi><mo stretchy="true" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(1 - \beta)</annotation></semantics></math>
to identify a treatment effect
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>δ</mi><annotation encoding="application/x-tex">\delta</annotation></semantics></math>
with an
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>s</mi><annotation encoding="application/x-tex">s</annotation></semantics></math>-sided
test with type I error rate
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>α</mi><annotation encoding="application/x-tex">\alpha</annotation></semantics></math>
at the final analysis is given by:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ℐ</mi><mi>F</mi></msub><mo>=</mo><msup><mrow><mo stretchy="true" form="prefix">(</mo><mfrac><mrow><msub><mi>Z</mi><mrow><mi>α</mi><mi>/</mi><mi>s</mi></mrow></msub><mo>+</mo><msub><mi>Z</mi><mi>β</mi></msub></mrow><mi>δ</mi></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup><mo>≈</mo><mfrac><mn>1</mn><msup><mrow><mo stretchy="true" form="prefix">(</mo><mi>S</mi><mi>E</mi><mrow><mo stretchy="true" form="prefix">(</mo><mover><mi>δ</mi><mo accent="true">̂</mo></mover><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup></mfrac><mo>=</mo><mfrac><mn>1</mn><mrow><mi>V</mi><mi>a</mi><mi>r</mi><mrow><mo stretchy="true" form="prefix">(</mo><mover><mi>δ</mi><mo accent="true">̂</mo></mover><mo stretchy="true" form="postfix">)</mo></mrow></mrow></mfrac></mrow><annotation encoding="application/x-tex">\mathcal{I}_{F} = \left(\frac{Z_{\alpha/s} + Z_{\beta}}{\delta}\right)^2 \approx \frac{1}{\left(SE(\hat{\delta})\right)^2} = \frac{1}{Var(\hat{\delta})}</annotation></semantics></math></p>
<p>Note that
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>δ</mi><annotation encoding="application/x-tex">\delta</annotation></semantics></math>
may be on different scales, depending on the scale of the estimand of
interest. Continuous and binary outcomes dealt with information for a
difference in means, while time-to-event outcomes could be assessed on
the log hazard ratio, survival probability, or restricted mean survival
time scale:</p>
<div class="section level5">
<h5 id="information-log-hazard-ratio">Information: Log Hazard Ratio<a class="anchor" aria-label="anchor" href="#information-log-hazard-ratio"></a>
</h5>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Determine information required to achieve desired power at fixed error rate</span></span>
<span><span class="va">information_single_stage_log_hr</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">impart</span><span class="fu">::</span><span class="fu"><a href="../reference/required_info.html">required_information_single_stage</a></span><span class="op">(</span></span>
<span>    <span class="co"># Note: Estimand is on log hazard ratio scale</span></span>
<span>    delta <span class="op">=</span> <span class="va">minimum_difference_log_hr</span>,</span>
<span>    alpha <span class="op">=</span> <span class="va">alpha</span>,</span>
<span>    power <span class="op">=</span> <span class="va">power</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">information_single_stage_log_hr</span></span>
<span><span class="co">#&gt; [1] 115.8938</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="information-survival-probability">Information: Survival Probability<a class="anchor" aria-label="anchor" href="#information-survival-probability"></a>
</h5>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Determine information required to achieve desired power at fixed error rate</span></span>
<span><span class="va">information_single_stage_sp</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">impart</span><span class="fu">::</span><span class="fu"><a href="../reference/required_info.html">required_information_single_stage</a></span><span class="op">(</span></span>
<span>    <span class="co"># Note: Estimand is on survival probability scale</span></span>
<span>    delta <span class="op">=</span> <span class="va">minimum_difference_sp</span>,</span>
<span>    alpha <span class="op">=</span> <span class="va">alpha</span>,</span>
<span>    power <span class="op">=</span> <span class="va">power</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">information_single_stage_sp</span></span>
<span><span class="co">#&gt; [1] 466.9966</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="information-restricted-mean-survival-time">Information: Restricted Mean Survival Time<a class="anchor" aria-label="anchor" href="#information-restricted-mean-survival-time"></a>
</h5>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">information_single_stage_rmst</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">impart</span><span class="fu">::</span><span class="fu"><a href="../reference/required_info.html">required_information_single_stage</a></span><span class="op">(</span></span>
<span>    <span class="co"># Note: Estimand is on restricted mean survival time scale</span></span>
<span>    delta <span class="op">=</span> <span class="va">minimum_difference_rmst</span>,</span>
<span>    alpha <span class="op">=</span> <span class="va">alpha</span>,</span>
<span>    power <span class="op">=</span> <span class="va">power</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">information_single_stage_rmst</span></span>
<span><span class="co">#&gt; [1] 10.50742</span></span></code></pre></div>
<p>For example, 90% power and a Type I Error rate of 0.05 using a
2-sided test would require information exceeding:</p>
<ul>
<li>115.89 to detect a difference in the log hazard ratio of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>δ</mi><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>H</mi><mi>R</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow></msub><annotation encoding="application/x-tex">\delta_{log(HR)}</annotation></semantics></math>
= -0.3 (i.e. a hazard ratio of 0.74)</li>
<li>467 to detect a difference in survival probability of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>δ</mi><mrow><mi>S</mi><mi>P</mi></mrow></msub><annotation encoding="application/x-tex">\delta_{SP}</annotation></semantics></math>
= 0.15 at
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>τ</mi><annotation encoding="application/x-tex">\tau</annotation></semantics></math>
= 5 years</li>
<li>10.51 to detect a difference in restricted mean survival time
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>δ</mi><mrow><mi>R</mi><mi>M</mi><mi>S</mi><mi>T</mi></mrow></msub><annotation encoding="application/x-tex">\delta_{RMST}</annotation></semantics></math>
= 1 year at
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>τ</mi><annotation encoding="application/x-tex">\tau</annotation></semantics></math>
= 5 years</li>
</ul>
<p>Investigators can collect data until the precision (the reciprocal of
the square of the standard error) reaches this level, and their analysis
will have the appropriate power and Type I error control. This is known
as a single stage design, since data are only analyzed at a single point
during the study.</p>
<p>For a binary outcome, there’s only one nuisance parameter related to
the outcome distribution: the risk of the outcome in controls. For a
continuous outcome, there are two nuisance parameters: the variance of
the outcome in each treatment arm. Unfortunately, with time-to-event
outcomes, the number of events
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>D</mi><annotation encoding="application/x-tex">D</annotation></semantics></math>
depends on the distribution of both event times and censoring in each
arm. For survival probability and RMST, the number of events depends on
the time after randomization at which they are evaluated: the time
horizon
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>τ</mi><annotation encoding="application/x-tex">\tau</annotation></semantics></math>.</p>
</div>
</div>
<div class="section level3">
<h3 id="sequential-analyses-in-studies">Sequential Analyses in Studies<a class="anchor" aria-label="anchor" href="#sequential-analyses-in-studies"></a>
</h3>
<p>If the true effect of interest is greater than the minimum meaningful
effect
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>δ</mi><annotation encoding="application/x-tex">\delta</annotation></semantics></math>,
the study may still be overpowered. Conversely, if the true effect is
very small, or indicates that the benefits of participating in the study
are not commensurate with risks, it may be futile to continue data
collection. In such cases, interim analyses of the data can be used to
guide more ethical, cost-effective data collection. These are known as
multi-stage designs, as data are analyzed at multiple points in the
study.</p>
<p>Group-Sequential Designs allow investigators to control Type I Error
rates when performing pre-specified interim assessments of the
differences between groups. Studies can also be stopped early for
futility if accruing data suggest that a treatment is ineffective or
harmful. The number and timing of analyses must be pre-specified, as
well as the rules for stopping for efficacy and futility. The stopping
rules are specified using ‘spending functions:’ alpha spending functions
define efficacy stopping rules, and beta spending functions define
futility stopping rules. For more information on group sequential
designs, see <a href="https://www.rpact.org" class="external-link">the documentation for the
<code>RPACT</code> package</a>. This example will utilize the
O’Brien-Fleming stopping rules for efficacy and futility.</p>
<p>In contrast to a group sequential design, which performs analyses at
pre-specified fractions of the final sample size, an
information-monitored study performs analyses when the data collected
provide enough precision to identify a treatment effect with the
appropriate power and Type I Error. Analyses are conducted when the
precision reaches pre-specified fractions of this level of
precision.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Group Sequential Design Parameters</span></span>
<span><span class="va">information_rates</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.50</span>, <span class="fl">1.00</span><span class="op">)</span> <span class="co"># Analyses at 50% and 100% of the Total Information</span></span>
<span><span class="va">type_of_design</span> <span class="op">&lt;-</span> <span class="st">"asOF"</span> <span class="co"># O'Brien-Fleming Alpha Spending</span></span>
<span><span class="va">type_beta_spending</span> <span class="op">&lt;-</span> <span class="st">"bsOF"</span> <span class="co"># O'Brien-Fleming Beta Spending</span></span></code></pre></div>
<p>The <code>getDesignGroupSequential</code> function in the
<code>rpact</code> library can be used to specify the appropriate study
design. For example, a two-sided test comparing
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>H</mi><mn>0</mn></msub><mo>:</mo><msub><mi>μ</mi><mi>T</mi></msub><mo>−</mo><msub><mi>μ</mi><mi>C</mi></msub><mo>=</mo><msub><mi>δ</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">H_{0}: \mu_{T} - \mu_{C} = \delta_{0}</annotation></semantics></math>
vs. <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>H</mi><mi>A</mi></msub><mo>:</mo><msub><mi>μ</mi><mi>T</mi></msub><mo>−</mo><msub><mi>μ</mi><mi>C</mi></msub><mo>≠</mo><msub><mi>δ</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">H_{A}: \mu_{T} - \mu_{C} \neq \delta_{0}</annotation></semantics></math></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set up group sequential testing procedure</span></span>
<span><span class="va">trial_design</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">rpact</span><span class="fu">::</span><span class="fu"><a href="https://rpact-com.github.io/rpact/reference/getDesignGroupSequential.html" class="external-link">getDesignGroupSequential</a></span><span class="op">(</span></span>
<span>    alpha <span class="op">=</span> <span class="va">alpha</span>,</span>
<span>    beta <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">power</span>,</span>
<span>    sided <span class="op">=</span> <span class="fl">2</span>,</span>
<span>    informationRates <span class="op">=</span> <span class="va">information_rates</span>,</span>
<span>    typeOfDesign <span class="op">=</span> <span class="va">type_of_design</span>,</span>
<span>    typeBetaSpending <span class="op">=</span> <span class="va">type_beta_spending</span>,</span>
<span>    bindingFutility <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="adjusting-information-for-multiple-analyses">Adjusting Information for Multiple Analyses<a class="anchor" aria-label="anchor" href="#adjusting-information-for-multiple-analyses"></a>
</h3>
<p>When doing sequential analyses in an information-monitored design,
the target level of information must be adjusted:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Inflate information level to account for multiple testing</span></span>
<span><span class="va">information_adaptive_log_hr</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">impart</span><span class="fu">::</span><span class="fu"><a href="../reference/required_information_sequential.html">required_information_sequential</a></span><span class="op">(</span></span>
<span>    information_single_stage <span class="op">=</span> <span class="va">information_single_stage_log_hr</span>,</span>
<span>    trial_design <span class="op">=</span> <span class="va">trial_design</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">information_adaptive_log_hr</span></span>
<span><span class="co">#&gt; [1] 119.3129</span></span></code></pre></div>
<p>The information required under the specified design for the log
hazard ratio is 119.3128754, which is scaled up by the inflation factor
mentioned in the summary of the design (1.0295022). This can be
retrieved using
<code>rpact::getDesignCharacteristics(trial_design)</code>.</p>
</div>
<div class="section level3">
<h3 id="including-covariate-information">Including Covariate Information<a class="anchor" aria-label="anchor" href="#including-covariate-information"></a>
</h3>
<p>For the log hazard ratio, if only the number of events
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>D</mi><annotation encoding="application/x-tex">D</annotation></semantics></math>
is known, along with the sample size in the treatment
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>N</mi><mn>1</mn></msub><annotation encoding="application/x-tex">N_{1}</annotation></semantics></math>)
and control
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>N</mi><mn>0</mn></msub><annotation encoding="application/x-tex">N_{0}</annotation></semantics></math>)
arms, the variance of the log hazard ratio can be approximated by <span class="citation">[@Tierney2025]</span>:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mi>a</mi><mi>r</mi><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>θ</mi><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>H</mi><mi>R</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><msup><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>N</mi><mn>1</mn></msub><mo>+</mo><msub><mi>N</mi><mn>0</mn></msub><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup><mi>/</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>D</mi><msub><mi>N</mi><mn>1</mn></msub><msub><mi>N</mi><mn>0</mn></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><msup><mrow><mo stretchy="true" form="prefix">(</mo><mn>1</mn><mo>+</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup><mi>/</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>r</mi><mi>D</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">var(\theta_{log(HR)}) = (N_{1} +N_{0})^2/(DN_{1}N_{0}) = (1 + r)^2/(rD)</annotation></semantics></math>
The information is approximately:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ℐ</mi><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>H</mi><mi>R</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow></msub><mo>=</mo><mi>D</mi><msub><mi>N</mi><mn>1</mn></msub><msub><mi>N</mi><mn>0</mn></msub><mi>/</mi><msup><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>N</mi><mn>1</mn></msub><mo>+</mo><msub><mi>N</mi><mn>0</mn></msub><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup><mo>=</mo><mi>D</mi><mi>r</mi><mi>/</mi><msup><mrow><mo stretchy="true" form="prefix">(</mo><mn>1</mn><mo>+</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\mathcal{I}_{log(HR)} = DN_{1}N_{0}/(N_{1} +N_{0})^2 = Dr/(1 + r)^2</annotation></semantics></math>
This approximation is used in
<code>asymptotic_information_logrank</code> which determines the amount
of information from an
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>:</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">r:1</annotation></semantics></math>
randomized trial:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Information for 1:1 trial with number of events from Schoenfeld formula</span></span>
<span><span class="fu">impart</span><span class="fu">::</span><span class="fu"><a href="../reference/asymptotic_information_logrank.html">asymptotic_information_logrank</a></span><span class="op">(</span></span>
<span>  allocation_ratio <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  total_events <span class="op">=</span> </span>
<span>    <span class="fu">impart</span><span class="fu">::</span><span class="fu"><a href="../reference/hr_design.html">hr_design</a></span><span class="op">(</span></span>
<span>      hazard_ratio <span class="op">=</span> <span class="va">minimum_difference_hr</span>,</span>
<span>      power <span class="op">=</span> <span class="va">power</span>,</span>
<span>      alpha <span class="op">=</span> <span class="va">alpha</span>,</span>
<span>      test_sides <span class="op">=</span> <span class="va">test_sides</span>,</span>
<span>      ratio <span class="op">=</span> <span class="fl">1</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 115.8938</span></span>
<span></span>
<span><span class="co"># Information target based on delta, alpha, power for single stage design</span></span>
<span><span class="va">information_single_stage_log_hr</span></span>
<span><span class="co">#&gt; [1] 115.8938</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">relative_efficiency</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1.1</span>, <span class="fl">1.2</span><span class="op">)</span></span>
<span></span>
<span><span class="va">adjusted_events</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/information_to_n.html">information_to_events_log_hr</a></span><span class="op">(</span></span>
<span>    information <span class="op">=</span> <span class="va">information_single_stage_log_hr</span><span class="op">/</span><span class="va">relative_efficiency</span>,</span>
<span>    round_up <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  relative_efficiency <span class="op">=</span> <span class="va">relative_efficiency</span>,</span>
<span>  information_adjusted <span class="op">=</span> <span class="va">information_single_stage_log_hr</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/setNames.html" class="external-link">setNames</a></span><span class="op">(</span></span>
<span>    object <span class="op">=</span> <span class="va">adjusted_events</span>,</span>
<span>    nm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"information_unadjusted"</span>, <span class="st">"allocation_ratio"</span>, <span class="st">"total_events"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt;   relative_efficiency information_adjusted information_unadjusted</span></span>
<span><span class="co">#&gt; 1                 1.0             115.8938              115.89375</span></span>
<span><span class="co">#&gt; 2                 1.1             115.8938              105.35795</span></span>
<span><span class="co">#&gt; 3                 1.2             115.8938               96.57813</span></span>
<span><span class="co">#&gt;   allocation_ratio total_events</span></span>
<span><span class="co">#&gt; 1                1          464</span></span>
<span><span class="co">#&gt; 2                1          422</span></span>
<span><span class="co">#&gt; 3                1          387</span></span></code></pre></div>
<p>This pre-trial planning can help investigators determine when
information thresholds may be reached under different potential gains
from covariate adjustment when inferring about the marginal hazard
ratio.</p>
<p>Power and sample size software exists for design calculations with
the RMST, including the <a href="https://github.com/anneae/RMSTdesign/tree/master" class="external-link">RMSTdesign
package</a> <span class="citation">[@Eaton2020]</span>, and the <a href="https://cran.r-project.org/web/packages/SSRMST/index.html" class="external-link">SSRMST
package</a>.</p>
<p>Until the variance of the RMST or survival probability can be
approximated by the number of observed events, investigators will have
to rely on information monitoring during an ongoing trial.</p>
</div>
<div class="section level3">
<h3 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h3>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://publichealth.jhu.edu/faculty/2679/joshua-betz" class="external-link">Josh Betz</a>, <a href="https://kellyvanlancker.com/" class="external-link">Kelly Van Lancker</a>, <a href="https://mrosenblumbiostat.wordpress.com/" class="external-link">Michael Rosenblum</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
