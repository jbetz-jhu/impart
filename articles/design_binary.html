<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Designing Information Monitored Trials for Binary Outcomes • impart</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Designing Information Monitored Trials for Binary Outcomes">
<meta name="description" content="How to design an information monitored randomized trial for binary outcomes
">
<meta property="og:description" content="How to design an information monitored randomized trial for binary outcomes
">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">impart</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/impart.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Information Monitoring - Continuous Outcomes</h6></li>
    <li><a class="dropdown-item" href="../articles/design_continuous.html">Designing Information Monitored Trials for Continuous Outcomes</a></li>
    <li><a class="dropdown-item" href="../articles/monitoring_continuous.html">Monitoring Information for a Continuous Outcome</a></li>
    <li><a class="dropdown-item" href="../articles/analyses_continuous.html">Monitored Analyses for a Continuous Outcome</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Information Monitoring - Binary Outcomes</h6></li>
    <li><a class="dropdown-item" href="../articles/design_binary.html">Designing Information Monitored Trials for Binary Outcomes</a></li>
    <li><a class="dropdown-item" href="../articles/monitoring_binary.html">Monitoring Information for a Binary Outcome</a></li>
    <li><a class="dropdown-item" href="../articles/analyses_binary.html">Monitored Analyses for a Binary Outcome</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Information Monitoring - Time-to-Event Outcomes</h6></li>
    <li><a class="dropdown-item" href="../articles/design_time_to_event.html">Designing Information Monitored Trials for Time-to-Event Outcomes</a></li>
    <li><a class="dropdown-item" href="../articles/monitoring_time_to_event.html">Monitoring Information for a Time-to-Event Outcome</a></li>
    <li><a class="dropdown-item" href="../articles/analyses_time_to_event.html">Monitored Analyses for a Time-to-Event Outcome</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Additional Vignettes</h6></li>
    <li><a class="dropdown-item" href="../articles/analyses_group_sequential.html">Covariate Adjustment in Group Sequential Designs</a></li>
    <li><a class="dropdown-item" href="../articles/new_methods_in_impart.html">Implementing New Methods in `impart`</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Plans &amp; Specifications</h6></li>
    <li><a class="dropdown-item" href="../articles/plan_requirements.html">Software Requirements Specification</a></li>
    <li><a class="dropdown-item" href="../articles/plan_quality.html">Software Quality &amp; Management Plan</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jbetz-jhu/impart/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Designing Information Monitored Trials for Binary Outcomes</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/jbetz-jhu/impart/blob/main/vignettes/design_binary.Rmd" class="external-link"><code>vignettes/design_binary.Rmd</code></a></small>
      <div class="d-none name"><code>design_binary.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jbetz-jhu.github.io/impart/">impart</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/heliosdrm/pwr" class="external-link">pwr</a></span><span class="op">)</span> <span class="co"># Only required for examples, not for `impart`</span></span></code></pre></div>
<div class="section level2">
<h2 id="planning-the-study">Planning The Study<a class="anchor" aria-label="anchor" href="#planning-the-study"></a>
</h2>
<p>Planning an information-monitored study is similar in many respects
to planning a study with a fixed sample size. Investigators must decide
on <a href="https://covariateadjustment.github.io/estimands.html" class="external-link">the
target of statistical inference, also known as an estimand</a>: for a
binary outcome, the risk difference is usually of interest, although
investigators may also be interested in a risk ratio (relative risk), or
odds ratio. Once the estimand is chosen, decisions must be made about
what constitutes a meaningful effect size on the scale of the estimand
(e.g. a 10% absolute reduction in risk or a relative risk of 0.75).
Finally, the characteristics of the testing procedure must be specified,
including the desired Type I Error Rate
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>α</mi><annotation encoding="application/x-tex">\alpha</annotation></semantics></math>),
statistical power
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>−</mo><mi>β</mi></mrow><annotation encoding="application/x-tex">1 - \beta</annotation></semantics></math>),
and the direction of alternatives of interest (an
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>s</mi><annotation encoding="application/x-tex">s</annotation></semantics></math>-sided
test: 1- or 2-sided):</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Universal Study Design Parameters</span></span>
<span><span class="va">minimum_difference</span> <span class="op">&lt;-</span> <span class="fl">0.15</span> <span class="co"># Effect Size: An absolute risk difference of </span></span>
<span><span class="va">alpha</span> <span class="op">&lt;-</span> <span class="fl">0.05</span> <span class="co"># Type I Error Rate</span></span>
<span><span class="va">power</span> <span class="op">&lt;-</span> <span class="fl">0.9</span> <span class="co"># Statistical Power</span></span>
<span><span class="va">test_sides</span> <span class="op">&lt;-</span> <span class="fl">2</span> <span class="co"># Direction of Alternatives</span></span></code></pre></div>
<p>The amount of data that must be collected depends on the amount of
the information in the accruing data, with the information depending on
the patterns of associations among variables, the risk of the outcome in
the control arm, and degree of missingness. Such information is not
always available when studies are being planned in practice.</p>
<p>Fixed sample size designs require investigators make assumptions
about the factors affecting precision: when such assumptions are
incorrect, studies can be over- or under-powered. Rather than planning
data collection until a pre-specified sample size is reached, an
information-monitored study continues data collection until the data
collected provide enough precision to identify a meaningful difference
with appropriate power and control of Type I Error.</p>
<div class="section level3">
<h3 id="determining-the-target-information-level">Determining the Target Information Level<a class="anchor" aria-label="anchor" href="#determining-the-target-information-level"></a>
</h3>
<p>The information or precision required to achieve power
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">(</mo><mn>1</mn><mo>−</mo><mi>β</mi><mo stretchy="true" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(1 - \beta)</annotation></semantics></math>
to identify a treatment effect
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>δ</mi><annotation encoding="application/x-tex">\delta</annotation></semantics></math>
with an
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>s</mi><annotation encoding="application/x-tex">s</annotation></semantics></math>-sided
test with type I error rate
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>α</mi><annotation encoding="application/x-tex">\alpha</annotation></semantics></math>
at the final analysis is given by:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ℐ</mi><mi>F</mi></msub><mo>=</mo><msup><mrow><mo stretchy="true" form="prefix">(</mo><mfrac><mrow><msub><mi>Z</mi><mrow><mi>α</mi><mi>/</mi><mi>s</mi></mrow></msub><mo>+</mo><msub><mi>Z</mi><mi>β</mi></msub></mrow><mi>δ</mi></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup><mo>≈</mo><mfrac><mn>1</mn><msup><mrow><mo stretchy="true" form="prefix">(</mo><mi>S</mi><mi>E</mi><mrow><mo stretchy="true" form="prefix">(</mo><mover><mi>δ</mi><mo accent="true">̂</mo></mover><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup></mfrac><mo>=</mo><mfrac><mn>1</mn><mrow><mi>V</mi><mi>a</mi><mi>r</mi><mrow><mo stretchy="true" form="prefix">(</mo><mover><mi>δ</mi><mo accent="true">̂</mo></mover><mo stretchy="true" form="postfix">)</mo></mrow></mrow></mfrac></mrow><annotation encoding="application/x-tex">\mathcal{I}_{F} = \left(\frac{Z_{\alpha/s} + Z_{\beta}}{\delta}\right)^2 \approx \frac{1}{\left(SE(\hat{\delta})\right)^2} = \frac{1}{Var(\hat{\delta})}</annotation></semantics></math></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Determine information required to achieve desired power at fixed error rate</span></span>
<span><span class="va">information_single_stage</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">impart</span><span class="fu">::</span><span class="fu"><a href="../reference/required_info.html">required_information_single_stage</a></span><span class="op">(</span></span>
<span>    delta <span class="op">=</span> <span class="va">minimum_difference</span>,</span>
<span>    alpha <span class="op">=</span> <span class="va">alpha</span>,</span>
<span>    power <span class="op">=</span> <span class="va">power</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">information_single_stage</span></span>
<span><span class="co">#&gt; [1] 466.9966</span></span></code></pre></div>
<p>For example, detecting a risk difference difference of 0.15 with 90%
power and a Type I Error rate of 0.05 using a 2-sided test requires an
information level of 466.9965805. Investigators can collect data until
the precision (the reciprocal of the square of the standard error)
reaches this level, and their analysis will have the appropriate power
and Type I error control.</p>
</div>
<div class="section level3">
<h3 id="translating-information-into-sample-size">Translating Information into Sample Size<a class="anchor" aria-label="anchor" href="#translating-information-into-sample-size"></a>
</h3>
<p>Translating information levels to a sample size requires making some
assumption about nuisance parameters, such as the probability of the
outcomes in the control arm. The
<code>information_to_n_binary_1_to_1</code> function takes an
information level and values of the nuisance parameters, and gives an
approximate sample size. Note that this calculation only takes into
account the information contained in the observed outcomes: if some
outcomes are missing, or if the analysis makes use of information in
baseline covariates and intermediate outcomes, this can change the
sample size at which the target information level is reached.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Assume control probability = 0.25</span></span>
<span><span class="va">approximate_n_p0_0.25</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">impart</span><span class="fu">::</span><span class="fu"><a href="../reference/information_to_n.html">information_to_n_risk_difference</a></span><span class="op">(</span></span>
<span>    information <span class="op">=</span> <span class="va">information_single_stage</span>,</span>
<span>    pi_0 <span class="op">=</span> <span class="fl">0.25</span>,</span>
<span>    delta <span class="op">=</span> <span class="va">minimum_difference</span>,</span>
<span>    round_up <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">approximate_n_p0_0.25</span></span>
<span><span class="co">#&gt;   n_per_arm n_total</span></span>
<span><span class="co">#&gt; 1       200     400</span></span>
<span></span>
<span><span class="co"># Compute Power: Fixed Sample Size</span></span>
<span><span class="fu">pwr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pwr/man/pwr.2p.test.html" class="external-link">pwr.2p.test</a></span><span class="op">(</span></span>
<span>  h <span class="op">=</span> <span class="fu">pwr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pwr/man/ES.h.html" class="external-link">ES.h</a></span><span class="op">(</span>p1 <span class="op">=</span> <span class="fl">0.25</span> <span class="op">+</span> <span class="va">minimum_difference</span>, p2 <span class="op">=</span> <span class="fl">0.25</span><span class="op">)</span>,</span>
<span>  sig.level <span class="op">=</span> <span class="va">alpha</span>,</span>
<span>  power <span class="op">=</span> <span class="va">power</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;      Difference of proportion power calculation for binomial distribution (arcsine transformation) </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;               h = 0.3222409</span></span>
<span><span class="co">#&gt;               n = 202.3787</span></span>
<span><span class="co">#&gt;       sig.level = 0.05</span></span>
<span><span class="co">#&gt;           power = 0.9</span></span>
<span><span class="co">#&gt;     alternative = two.sided</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; NOTE: same sample sizes</span></span>
<span></span>
<span><span class="co"># Assume control probability = 0.42</span></span>
<span><span class="va">approximate_n_p0_0.42</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">impart</span><span class="fu">::</span><span class="fu"><a href="../reference/information_to_n.html">information_to_n_risk_difference</a></span><span class="op">(</span></span>
<span>    information <span class="op">=</span> <span class="va">information_single_stage</span>,</span>
<span>    pi_0 <span class="op">=</span> <span class="fl">0.42</span>,</span>
<span>    delta <span class="op">=</span> <span class="va">minimum_difference</span>,</span>
<span>    round_up <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">approximate_n_p0_0.42</span></span>
<span><span class="co">#&gt;   n_per_arm n_total</span></span>
<span><span class="co">#&gt; 1       229     458</span></span>
<span></span>
<span><span class="co"># Compute Power: Fixed Sample Size</span></span>
<span><span class="fu">pwr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pwr/man/pwr.2p.test.html" class="external-link">pwr.2p.test</a></span><span class="op">(</span></span>
<span>  h <span class="op">=</span> <span class="fu">pwr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pwr/man/ES.h.html" class="external-link">ES.h</a></span><span class="op">(</span>p1 <span class="op">=</span> <span class="fl">0.42</span> <span class="op">+</span> <span class="va">minimum_difference</span>, p2 <span class="op">=</span> <span class="fl">0.42</span><span class="op">)</span>,</span>
<span>  sig.level <span class="op">=</span> <span class="va">alpha</span>,</span>
<span>  power <span class="op">=</span> <span class="va">power</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;      Difference of proportion power calculation for binomial distribution (arcsine transformation) </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;               h = 0.3011521</span></span>
<span><span class="co">#&gt;               n = 231.7151</span></span>
<span><span class="co">#&gt;       sig.level = 0.05</span></span>
<span><span class="co">#&gt;           power = 0.9</span></span>
<span><span class="co">#&gt;     alternative = two.sided</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; NOTE: same sample sizes</span></span></code></pre></div>
<p>Note that under specific assumptions about the outcome probability in
the control arm are met, the sample size requirements determined using
the calculation fixed sample size design (<code><a href="https://rdrr.io/pkg/pwr/man/pwr.2p.test.html" class="external-link">pwr::pwr.2p.test</a></code>)
or the calculation information-monitored design
(<code>information_to_n_binary_1_to_1</code>) are similar. The slight
differences are due to differences in the approximation (a normal
approximation versus the arcsine transformation).</p>
<p>The advantage of an information-adaptive design is the sample size
adapts to the information in the accruing data: rather than making
assumptions about the outcome probability in the control arm, which
could result in an over- or under-powered trial, data collection
proceeds until the target information level is met, which ensures
adequate power and Type I Error control.</p>
</div>
<div class="section level3">
<h3 id="sequential-analyses-in-studies">Sequential Analyses in Studies<a class="anchor" aria-label="anchor" href="#sequential-analyses-in-studies"></a>
</h3>
<p>If the true effect of interest is greater than the minimum meaningful
effect
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>δ</mi><annotation encoding="application/x-tex">\delta</annotation></semantics></math>,
the study may still be overpowered. Conversely, if the true effect is
very small, or indicates that the benefits of participating in the study
are not commensurate with risks, it may be futile to continue data
collection. In such cases, interim analyses of the data can be used to
guide more ethical, cost-effective data collection.</p>
<p>Group-Sequential Designs allow investigators to control Type I Error
rates when performing pre-specified interim assessments of the
differences between groups. Studies can also be stopped early for
futility if accruing data suggest that a treatment is ineffective or
harmful. The number and timing of analyses must be pre-specified, as
well as the rules for stopping for efficacy and futility. The stopping
rules are specified using ‘spending functions:’ alpha spending functions
define efficacy stopping rules, and beta spending functions define
futility stopping rules. For more information on group sequential
designs, see <a href="https://www.rpact.org" class="external-link">the documentation for the
<code>RPACT</code> package</a>. This example will utilize the
O’Brien-Fleming stopping rules for efficacy and futility.</p>
<p>In contrast to a group sequential design, which performs analyses at
pre-specified fractions of the final sample size, an
information-monitored study performs analyses when the data collected
provide enough precision to identify a treatment effect with the
appropriate power and Type I Error. Analyses are conducted when the
precision reaches pre-specified fractions of this level of
precision.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Group Sequential Design Parameters</span></span>
<span><span class="va">information_rates</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.50</span>, <span class="fl">0.75</span>, <span class="fl">1.00</span><span class="op">)</span> <span class="co"># Analyses at 50%, 75%, and 100% of the Total Information</span></span>
<span><span class="va">type_of_design</span> <span class="op">&lt;-</span> <span class="st">"asOF"</span> <span class="co"># O'Brien-Fleming Alpha Spending</span></span>
<span><span class="va">type_beta_spending</span> <span class="op">&lt;-</span> <span class="st">"bsOF"</span> <span class="co"># O'Brien-Fleming Beta Spending</span></span></code></pre></div>
<p>The <code>getDesignGroupSequential</code> function in the
<code>rpact</code> library can be used to specify the appropriate study
design. For example, a two-sided test comparing
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>H</mi><mn>0</mn></msub><mo>:</mo><msub><mi>μ</mi><mi>T</mi></msub><mo>−</mo><msub><mi>μ</mi><mi>C</mi></msub><mo>=</mo><msub><mi>δ</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">H_{0}: \mu_{T} - \mu_{C} = \delta_{0}</annotation></semantics></math>
vs. <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>H</mi><mi>A</mi></msub><mo>:</mo><msub><mi>μ</mi><mi>T</mi></msub><mo>−</mo><msub><mi>μ</mi><mi>C</mi></msub><mo>≠</mo><msub><mi>δ</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">H_{A}: \mu_{T} - \mu_{C} \neq \delta_{0}</annotation></semantics></math></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set up group sequential testing procedure</span></span>
<span><span class="va">trial_design</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">rpact</span><span class="fu">::</span><span class="fu"><a href="https://rpact-com.github.io/rpact/reference/getDesignGroupSequential.html" class="external-link">getDesignGroupSequential</a></span><span class="op">(</span></span>
<span>    alpha <span class="op">=</span> <span class="va">alpha</span>,</span>
<span>    beta <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">power</span>,</span>
<span>    sided <span class="op">=</span> <span class="fl">2</span>,</span>
<span>    informationRates <span class="op">=</span> <span class="va">information_rates</span>,</span>
<span>    typeOfDesign <span class="op">=</span> <span class="va">type_of_design</span>,</span>
<span>    typeBetaSpending <span class="op">=</span> <span class="va">type_beta_spending</span>,</span>
<span>    bindingFutility <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>For a one-sided test using RPACT, the default boundaries assume users
are testing
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>H</mi><mn>0</mn></msub><mo>:</mo><msub><mi>μ</mi><mi>T</mi></msub><mo>−</mo><msub><mi>μ</mi><mi>C</mi></msub><mo>&lt;</mo><msub><mi>δ</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">H_{0}: \mu_{T} - \mu_{C} &lt; \delta_{0}</annotation></semantics></math>
vs. <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>H</mi><mi>A</mi></msub><mo>:</mo><msub><mi>μ</mi><mi>T</mi></msub><mo>−</mo><msub><mi>μ</mi><mi>C</mi></msub><mo>≥</mo><msub><mi>δ</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">H_{A}: \mu_{T} - \mu_{C} \ge \delta_{0}</annotation></semantics></math>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># One sided test: Higher values = Better</span></span>
<span><span class="va">trial_design_one_sided_upper</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">rpact</span><span class="fu">::</span><span class="fu"><a href="https://rpact-com.github.io/rpact/reference/getDesignGroupSequential.html" class="external-link">getDesignGroupSequential</a></span><span class="op">(</span></span>
<span>    alpha <span class="op">=</span> <span class="va">alpha</span>,</span>
<span>    beta <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">power</span>,</span>
<span>    sided <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    informationRates <span class="op">=</span> <span class="va">information_rates</span>,</span>
<span>    typeOfDesign <span class="op">=</span> <span class="va">type_of_design</span>,</span>
<span>    typeBetaSpending <span class="op">=</span> <span class="va">type_beta_spending</span>,</span>
<span>    bindingFutility <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">trial_design_one_sided_upper</span>,</span>
<span>  main <span class="op">=</span> <span class="st">"One-Sided: Higher Z = Superior"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="../reference/figures/Specify-One-Sided-Sequential-Design-Procedure-1.png" alt="A figure showing efficacy and futility stopping boundaries for a group sequential design with three analyses using a one-sided test where higher values of a test statistic indicate the superiority of treatment to control. These analyses are conducted when information reaches 50%, 75%, and 100% of the target information level. The x-axis has values of 0.50, 0.75, and 100, indicating the information fraction, and the y-axis indicates the non-binding futility boundaries. The efficacy boundaries decrease from left to right, with a boundary of 2.54 at an information fraction of 0.5, and a boundary of 1.72 at an information fraction of 1. The futility boundaries increase from left to right, with a boundary of 0.11 at an information fraction of 0.5, converging with to a boundary of 1.72 at information fraction of 1." width="80%" style="display: block; margin: auto;"></p>
<p>Users must <a href="https://github.com/rpact-com/rpact/issues/26" class="external-link">must manually
correct the resulting design boundaries</a> to test
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>H</mi><mn>0</mn></msub><mo>:</mo><msub><mi>μ</mi><mi>T</mi></msub><mo>−</mo><msub><mi>μ</mi><mi>C</mi></msub><mo>&gt;</mo><msub><mi>δ</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">H_{0}: \mu_{T} - \mu_{C} &gt; \delta_{0}</annotation></semantics></math>
vs. <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>H</mi><mi>A</mi></msub><mo>:</mo><msub><mi>μ</mi><mi>T</mi></msub><mo>−</mo><msub><mi>μ</mi><mi>C</mi></msub><mo>≤</mo><msub><mi>δ</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">H_{A}: \mu_{T} - \mu_{C} \le \delta_{0}</annotation></semantics></math>.
Until this correction is made, <code><a href="../reference/correct_one_sided_gsd.html">correct_one_sided_gsd()</a></code>
should be called on the result, which corrects the futility and efficacy
boundaries:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">trial_design_one_sided_lower</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/correct_one_sided_gsd.html">correct_one_sided_gsd</a></span><span class="op">(</span></span>
<span>    trial_design <span class="op">=</span> <span class="va">trial_design_one_sided_upper</span>,</span>
<span>    higher_better <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">trial_design_one_sided_lower</span>,</span>
<span>  main <span class="op">=</span> <span class="st">"Corrected One-Sided: Lower Z = Superior"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="../reference/figures/Correct-RPACT-One-Sided-Boundaries-1.png" alt="A figure showing efficacy and futility stopping boundaries for a group sequential design with three analyses using a one-sided test where lower values of a test statistic indicate the superiority of treatment to control. These analyses are conducted when information reaches 50%, 75%, and 100% of the target information level. The x-axis has values of 0.50, 0.75, and 100, indicating the information fraction, and the y-axis indicates the non-binding futility boundaries. The efficacy boundaries increase from left to right, with a boundary of -2.54 at an information fraction of 0.5, and a boundary of -1.72 at an information fraction of 1. The futility boundaries decrease from left to right, with a boundary of -0.11 at an information fraction of 0.5, converging with to a boundary of 1.72 at information fraction of 1." width="80%" style="display: block; margin: auto;"></p>
<p>Once this issue is resolved, users can specify the direction using
the <code>directionUpper</code> argument in other RPACT functions:</p>
<ul>
<li>
<code>directionUpper = TRUE</code> tests
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>H</mi><mn>0</mn></msub><mo>:</mo><msub><mi>μ</mi><mi>T</mi></msub><mo>−</mo><msub><mi>μ</mi><mi>C</mi></msub><mo>&lt;</mo><msub><mi>δ</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">H_{0}: \mu_{T} - \mu_{C} &lt; \delta_{0}</annotation></semantics></math>
vs. <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>H</mi><mi>A</mi></msub><mo>:</mo><msub><mi>μ</mi><mi>T</mi></msub><mo>−</mo><msub><mi>μ</mi><mi>C</mi></msub><mo>≥</mo><msub><mi>δ</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">H_{A}: \mu_{T} - \mu_{C} \ge \delta_{0}</annotation></semantics></math>
</li>
<li>
<code>directionUpper = FALSE</code> tests
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>H</mi><mn>0</mn></msub><mo>:</mo><msub><mi>μ</mi><mi>T</mi></msub><mo>−</mo><msub><mi>μ</mi><mi>C</mi></msub><mo>&gt;</mo><msub><mi>δ</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">H_{0}: \mu_{T} - \mu_{C} &gt; \delta_{0}</annotation></semantics></math>
vs. <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>H</mi><mi>A</mi></msub><mo>:</mo><msub><mi>μ</mi><mi>T</mi></msub><mo>−</mo><msub><mi>μ</mi><mi>C</mi></msub><mo>≤</mo><msub><mi>δ</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">H_{A}: \mu_{T} - \mu_{C} \le \delta_{0}</annotation></semantics></math>
</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># One sided test: Higher values = Better</span></span>
<span><span class="va">trial_design_one_sided_higher</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">rpact</span><span class="fu">::</span><span class="fu"><a href="https://rpact-com.github.io/rpact/reference/getDesignGroupSequential.html" class="external-link">getDesignGroupSequential</a></span><span class="op">(</span></span>
<span>    alpha <span class="op">=</span> <span class="va">alpha</span>,</span>
<span>    beta <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">power</span>,</span>
<span>    sided <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    informationRates <span class="op">=</span> <span class="va">information_rates</span>,</span>
<span>    typeOfDesign <span class="op">=</span> <span class="va">type_of_design</span>,</span>
<span>    typeBetaSpending <span class="op">=</span> <span class="va">type_beta_spending</span>,</span>
<span>    bindingFutility <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    directionUpper <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># One sided test: Lower values = Better</span></span>
<span><span class="va">trial_design_one_sided_lower</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">rpact</span><span class="fu">::</span><span class="fu"><a href="https://rpact-com.github.io/rpact/reference/getDesignGroupSequential.html" class="external-link">getDesignGroupSequential</a></span><span class="op">(</span></span>
<span>    alpha <span class="op">=</span> <span class="va">alpha</span>,</span>
<span>    beta <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">power</span>,</span>
<span>    sided <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    informationRates <span class="op">=</span> <span class="va">information_rates</span>,</span>
<span>    typeOfDesign <span class="op">=</span> <span class="va">type_of_design</span>,</span>
<span>    typeBetaSpending <span class="op">=</span> <span class="va">type_beta_spending</span>,</span>
<span>    directionUpper <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="adjusting-information-for-multiple-analyses">Adjusting Information for Multiple Analyses<a class="anchor" aria-label="anchor" href="#adjusting-information-for-multiple-analyses"></a>
</h3>
<p>When doing sequential analyses in an information-monitored design,
the target level of information must be adjusted:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Inflate information level to account for multiple testing</span></span>
<span><span class="va">information_adaptive</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">impart</span><span class="fu">::</span><span class="fu"><a href="../reference/inflation_factor.html">required_information_sequential</a></span><span class="op">(</span></span>
<span>    information_single_stage <span class="op">=</span> <span class="va">information_single_stage</span>,</span>
<span>    trial_design <span class="op">=</span> <span class="va">trial_design</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">information_adaptive</span></span>
<span><span class="co">#&gt; [1] 506.4762</span></span></code></pre></div>
<p>The information required under the specified design is 506.4762081,
which is scaled up by the inflation factor mentioned in the summary of
the design (1.0845394). This can be retrieved using
<code>rpact::getDesignCharacteristics(trial_design)</code>.</p>
</div>
<div class="section level3">
<h3 id="including-covariate-information">Including Covariate Information<a class="anchor" aria-label="anchor" href="#including-covariate-information"></a>
</h3>
<p>Appropriately including information from covariates has the potential
to increase the precision of analyses, meaning that target information
levels can be reached at lower sample sizes, resulting in studies with
shorter duration.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Information Only From Final Outcomes</span></span>
<span><span class="fu">impart</span><span class="fu">::</span><span class="fu"><a href="../reference/information_to_n.html">information_to_n_risk_difference</a></span><span class="op">(</span></span>
<span>  information <span class="op">=</span> <span class="va">information_rates</span><span class="op">*</span><span class="va">information_adaptive</span>,</span>
<span>  pi_0 <span class="op">=</span> <span class="fl">0.25</span>,</span>
<span>  pi_1 <span class="op">=</span> <span class="fl">0.25</span> <span class="op">+</span> <span class="va">minimum_difference</span>,</span>
<span>  round_up <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt;   information pi_0 pi_1 n_per_arm  n_total</span></span>
<span><span class="co">#&gt; 1    253.2381 0.25  0.4  108.2593 216.5186</span></span>
<span><span class="co">#&gt; 2    379.8572 0.25  0.4  162.3889 324.7779</span></span>
<span><span class="co">#&gt; 3    506.4762 0.25  0.4  216.5186 433.0372</span></span>
<span><span class="co"># 10% Relative Efficiency Increase from Covariates</span></span>
<span><span class="va">relative_efficiency</span> <span class="op">&lt;-</span> <span class="fl">1.1</span></span>
<span><span class="co"># Information From Final Outcomes + Covariates</span></span>
<span><span class="fu">impart</span><span class="fu">::</span><span class="fu"><a href="../reference/information_to_n.html">information_to_n_risk_difference</a></span><span class="op">(</span></span>
<span>  information <span class="op">=</span> <span class="va">information_rates</span><span class="op">*</span><span class="va">information_adaptive</span><span class="op">/</span><span class="va">relative_efficiency</span>,</span>
<span>  pi_0 <span class="op">=</span> <span class="fl">0.25</span>,</span>
<span>  pi_1 <span class="op">=</span> <span class="fl">0.25</span> <span class="op">+</span> <span class="va">minimum_difference</span>,</span>
<span>  round_up <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt;   information pi_0 pi_1 n_per_arm n_total</span></span>
<span><span class="co">#&gt; 1    230.2165 0.25  0.4        99     198</span></span>
<span><span class="co">#&gt; 2    345.3247 0.25  0.4       148     296</span></span>
<span><span class="co">#&gt; 3    460.4329 0.25  0.4       197     394</span></span>
<span><span class="co"># 20% Relative Efficiency Increase from Covariates</span></span>
<span><span class="va">relative_efficiency</span> <span class="op">&lt;-</span> <span class="fl">1.2</span></span>
<span><span class="co"># Information From Final Outcomes + Covariates</span></span>
<span><span class="fu">impart</span><span class="fu">::</span><span class="fu"><a href="../reference/information_to_n.html">information_to_n_risk_difference</a></span><span class="op">(</span></span>
<span>  information <span class="op">=</span> <span class="va">information_rates</span><span class="op">*</span><span class="va">information_adaptive</span><span class="op">/</span><span class="va">relative_efficiency</span>,</span>
<span>  pi_0 <span class="op">=</span> <span class="fl">0.25</span>,</span>
<span>  pi_1 <span class="op">=</span> <span class="fl">0.25</span> <span class="op">+</span> <span class="va">minimum_difference</span>,</span>
<span>  round_up <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt;   information pi_0 pi_1 n_per_arm n_total</span></span>
<span><span class="co">#&gt; 1    211.0318 0.25  0.4        91     182</span></span>
<span><span class="co">#&gt; 2    316.5476 0.25  0.4       136     272</span></span>
<span><span class="co">#&gt; 3    422.0635 0.25  0.4       181     362</span></span></code></pre></div>
<p>The increase in precision from covariate adjustment is never known
precisely during the planning of a study. Instead of relying on an
assumption about the gain in precision from covariates, investigators
can use information monitoring to adapt data collection to the accruing
information from both covariates and outcomes.</p>
</div>
<div class="section level3">
<h3 id="encapsulating-study-design">Encapsulating Study Design<a class="anchor" aria-label="anchor" href="#encapsulating-study-design"></a>
</h3>
<p>A <code>monitored_design</code> object encapsulates all of the
information about an information monitored study that should be fixed at
the outset, including the number of analyses, the information fractions
at which analyses are conducted, the target level of information, the
null value of the estimand of interest, the maximum feasible sample
size, and the pseudorandom number generator seed which is used for
analyses.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Initialize the monitored design</span></span>
<span><span class="va">monitored_design</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/initialize_monitored_design.html">initialize_monitored_design</a></span><span class="op">(</span></span>
<span>    trial_design <span class="op">=</span> <span class="va">trial_design</span>,</span>
<span>    null_value <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    maximum_sample_size <span class="op">=</span> <span class="fl">600</span>,</span>
<span>    information_target <span class="op">=</span> <span class="va">information_adaptive</span>,</span>
<span>    orthogonalize <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    rng_seed_analysis <span class="op">=</span> <span class="fl">54321</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">monitored_design</span></span>
<span><span class="co">#&gt; $original_design</span></span>
<span><span class="co">#&gt; $original_design$trial_design</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $original_design$maximum_sample_size</span></span>
<span><span class="co">#&gt; [1] 600</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $original_design$null_value</span></span>
<span><span class="co">#&gt; [1] 0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $original_design$information_target</span></span>
<span><span class="co">#&gt; [1] 506.4762</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $original_design$orthogonalize</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $original_design$rng_seed_analysis</span></span>
<span><span class="co">#&gt; [1] 54321</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $original_design$information_fractions</span></span>
<span><span class="co">#&gt; [1] 0.50 0.75 1.00</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $original_design$information_thresholds</span></span>
<span><span class="co">#&gt; [1] 253.2381 379.8572 506.4762</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attr(,"class")</span></span>
<span><span class="co">#&gt; [1] "monitored_design"</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://publichealth.jhu.edu/faculty/2679/joshua-betz" class="external-link">Josh Betz</a>, <a href="https://kellyvanlancker.com/" class="external-link">Kelly Van Lancker</a>, <a href="https://mrosenblumbiostat.wordpress.com/" class="external-link">Michael Rosenblum</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
