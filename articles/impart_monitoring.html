<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="impart">
<title>Monitoring Information with `impart` • impart</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Monitoring Information with `impart`">
<meta property="og:description" content="impart">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">impart</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/impart_analyses.html">Performing Monitored Analyses with `impart`</a>
    <a class="dropdown-item" href="../articles/impart_monitoring.html">Monitoring Information with `impart`</a>
    <a class="dropdown-item" href="../articles/impart_study_design.html">Planning Information Monitored Designs with `impart`</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Monitoring Information with `impart`</h1>
            
      
      
      <div class="d-none name"><code>impart_monitoring.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jbetz-jhu.github.io/impart/">impart</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">deming</span><span class="op">)</span> <span class="co"># Required for deming::theilsen()</span></span></code></pre></div>
<p>This vignette demonstrates how to use <code>impart</code> to monitor
the amount of information contained in the accrued data so that analyses
are not under- or over-powered. This builds upon the terminology and
concepts in the vignette on study design, which can be viewed as
follows:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/vignette.html" class="external-link">vignette</a></span><span class="op">(</span><span class="st">"impart_study_design"</span>, package <span class="op">=</span> <span class="st">"impart"</span><span class="op">)</span> <span class="co"># Design</span></span></code></pre></div>
<div class="section level2">
<h2 id="monitoring-ongoing-studies">Monitoring Ongoing Studies<a class="anchor" aria-label="anchor" href="#monitoring-ongoing-studies"></a>
</h2>
<p>In a fixed sample size design, the timing of the final analysis is
based on the last participant’s last visit. Group sequential analyses
are based when pre-specified fractions of the maximum sample size have
their final outcome observed. Timing analyses in such studies only
depends on counting the number of final outcomes observed during the
study.</p>
<p>In information-monitored designs, the times at which analyses are
performed and recruitment is stopped depend on when the information
reaches pre-specified thresholds. The amount of information contained in
the data depends on the number of observations, the completeness of the
data, the analytic methods used, and the interrelationships among the
observed data. Depending on the analysis methods used, an individual
could contribute baseline covariates and treatment assignment
information, post-randomization outcomes, and even post-randomization
auxiliary variables.</p>
<div class="section level3">
<h3 id="challenges-in-information-monitoring">Challenges in Information Monitoring<a class="anchor" aria-label="anchor" href="#challenges-in-information-monitoring"></a>
</h3>
<p>A new challenge in analyzing data in an ongoing trial is how to
appropriately treat missing data. Suppose the following are
observed:</p>
<ul>
<li>A participant is newly enrolled, has their baseline covariates
measured, is randomized, is still on study, and has not yet entered any
follow-up windows</li>
<li>A participant is randomized, but did not attend any follow-up
visits</li>
</ul>
<p>In both of these cases, the covariates, and treatment assignment are
observed, but the outcomes are missing. In the first case, outcomes are
not yet observed: while they are missing, they could still be observed
when the participant enters the study window. In the latter case, they
are known to be missing: the study window is closed without the outcome
being observed.</p>
<p>A convention can be used to differentiate outcomes that are not yet
observed from those known to be missing:</p>
<ul>
<li>Completed assessments have both an observed outcome and an observed
assessment time.</li>
<li>Missed assessments have a missing outcome, but an observed
assessment time:
<ul>
<li>If an assessment occurred, but no valid outcome was obtained, the
time of the assessment is used.</li>
<li>If an assessment was missed, the end of the study window is used,
indicating the last time an outcome could have been observed per
protocol.</li>
</ul>
</li>
<li>Not-yet-observed assessments are missing both an outcome and an
assessment time.</li>
</ul>
</div>
<div class="section level3">
<h3 id="example-data">Example Data:<a class="anchor" aria-label="anchor" href="#example-data"></a>
</h3>
<p>Information monitoring will be illustrated using a simulated dataset
named <code>example_1</code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">example_1</span><span class="op">)</span></span>
<span><span class="co">#&gt;   .id        x_1        x_2        x_3        x_4 tx       y_1       y_2</span></span>
<span><span class="co">#&gt; 1   1  2.0742970  0.1971432 -0.8425884  0.2794844  0        NA        NA</span></span>
<span><span class="co">#&gt; 2   2  0.2165473 -0.7384296  0.1315016 -1.2419134  0 -2.376967 -2.575398</span></span>
<span><span class="co">#&gt; 3   3  0.8294726  0.4997821  1.6932555 -0.4063889  1  2.094655 13.615512</span></span>
<span><span class="co">#&gt; 4   4 -1.0206893 -0.2189937 -1.7719120  0.1936013  1 -6.433176  3.015335</span></span>
<span><span class="co">#&gt; 5   5 -0.0417332  0.9282685  0.8078133  0.9317145  1  5.653307  8.839702</span></span>
<span><span class="co">#&gt; 6   6  0.7275778  1.1756811  0.0226265 -0.2556343  0        NA        NA</span></span>
<span><span class="co">#&gt;         y_3       y_4 .enrollment_time     .t_1      .t_2     .t_3     .t_4</span></span>
<span><span class="co">#&gt; 1        NA        NA         33.28136 77.28136 107.28136 137.2814 167.2814</span></span>
<span><span class="co">#&gt; 2        NA        NA         33.69242 74.02729  96.49186 137.6924 167.6924</span></span>
<span><span class="co">#&gt; 3 20.402979 24.403011         37.69694 73.32954 102.44161 129.2825 152.6411</span></span>
<span><span class="co">#&gt; 4  5.473575 -6.548695         39.40100 78.95480  95.29012 123.9621 156.4938</span></span>
<span><span class="co">#&gt; 5 21.906824  4.005459         41.32190 71.43593 102.43171 141.4073 150.4507</span></span>
<span><span class="co">#&gt; 6        NA        NA         55.24537 99.24537 129.24537 159.2454 189.2454</span></span></code></pre></div>
<p>The dataset is in wide format, with one row per individual. There are
four baseline covariates: <code>x_1</code>, <code>x_2</code>, …,
<code>x_4</code>. Treatment assignment is indicated a binary indicator
(<code>tx</code>), with the time from study initiation to randomization
indicated by <code>.enrollment_time</code>. There are four outcomes
assessed at 30, 60, 90, and 120 days post-randomization:
<code>y_1</code>, <code>y_2</code>, <code>y_3</code> and
<code>y_4</code>. The time to each observed outcome is indicated in
columns <code>.t_1</code>, <code>.t_2</code>, <code>.t_3</code> and
<code>.t_4</code>. For missed study visits, the time recorded is the
last day within the study window at which the individual’s outcome could
have been assessed.</p>
</div>
<div class="section level3">
<h3 id="preparing-interim-datasets">Preparing Interim Datasets<a class="anchor" aria-label="anchor" href="#preparing-interim-datasets"></a>
</h3>
<p>A function <code>prepare_interim_data</code> allows the user to
create indicator variables for each outcome, with each variable
indicating whether an outcome is observed (<code>1</code>), is known to
be missing (<code>0</code>), or has not yet been observed
(<code>NA</code>). This allows software to appropriately handle missing
information during an ongoing study.</p>
<p><code>prepare_interim_data</code> retains only the columns of data
relevant to the analysis at hand: covariates, study entry/enrollment
time, treatment assignment, outcomes, and the times at which outcomes
were measured.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Obtain time of last event</span></span>
<span><span class="va">last_event</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">example_1</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">".enrollment_time"</span>, <span class="st">".t_1"</span>, <span class="st">".t_2"</span>, <span class="st">".t_3"</span>, <span class="st">".t_4"</span><span class="op">)</span><span class="op">]</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span>na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">ceiling</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">prepared_final_data</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/prepare_monitored_study_data.html">prepare_monitored_study_data</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">example_1</span>,</span>
<span>    study_time <span class="op">=</span> <span class="va">last_event</span>,</span>
<span>    id_variable <span class="op">=</span> <span class="st">".id"</span>,</span>
<span>    covariates_variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x_1"</span>, <span class="st">"x_2"</span>, <span class="st">"x_3"</span>, <span class="st">"x_4"</span><span class="op">)</span>,</span>
<span>    enrollment_time_variable <span class="op">=</span> <span class="st">".enrollment_time"</span>,</span>
<span>    treatment_variable <span class="op">=</span> <span class="st">"tx"</span>,</span>
<span>    outcome_variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y_1"</span>, <span class="st">"y_2"</span>, <span class="st">"y_3"</span>, <span class="st">"y_4"</span><span class="op">)</span>,</span>
<span>    outcome_time_variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">".t_1"</span>, <span class="st">".t_2"</span>, <span class="st">".t_3"</span>, <span class="st">".t_4"</span><span class="op">)</span>, </span>
<span>    <span class="co"># Observe missingness 1 week after target study visit</span></span>
<span>    observe_missing_times <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">30</span>, <span class="fl">60</span>, <span class="fl">90</span>, <span class="fl">120</span><span class="op">)</span> <span class="op">+</span> <span class="fl">7</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>The resulting object contains the prepared dataset, the original
dataset, the study time of the data lock, and a list of variables and
their role in analyses.</p>
</div>
<div class="section level3">
<h3 id="reverting-to-information-earlier-in-the-study">Reverting to Information Earlier in the Study<a class="anchor" aria-label="anchor" href="#reverting-to-information-earlier-in-the-study"></a>
</h3>
<p>These conventions can also be used to take a dataset from one point
in time during the study, and revert to the information that was only
available at an earlier point in the study. This can be useful for
determining how quickly information is accruing during an ongoing study.
Let <span class="math inline">\((X_{1}, \ldots, X_{p})\)</span>, <span class="math inline">\(A\)</span>, <span class="math inline">\((Y_{1},
\ldots, Y_{j})\)</span>, and <span class="math inline">\((T_{Y_{1}},
\ldots, T_{Y_{J})}\)</span> respectively denote baseline covariates,
treatment assignment, the outcome observed at study visit <span class="math inline">\(j = 1, \ldots, J\)</span>, and the times at which
the study outcomes are observed. Let <span class="math inline">\(w^{c}_{j}\)</span> denote the closing of the study
window for visit <span class="math inline">\(j\)</span>.</p>
<p>To obtain the information available at <span class="math inline">\(t\)</span> days after the randomization of the
first participant:</p>
<ol style="list-style-type: decimal">
<li>Retain only participants where <span class="math inline">\(T_{A}
&lt; t\)</span>: i.e. those randomized by study time <span class="math inline">\(t\)</span>
</li>
<li>Set outcome <span class="math inline">\(Y_{j}\)</span> to unobserved
if <span class="math inline">\(T_{Y_{j}} &gt; t\)</span>: i.e. outcomes
not observed by time <span class="math inline">\(t\)</span>
</li>
<li>Set <span class="math inline">\(Y_{j}\)</span> to missing if <span class="math inline">\(T_{Y_{j}} - T_{A} &gt; w^{c}_{j}\)</span>:
otherwise, treat the outcome as not yet observed.</li>
</ol>
<p>For example, the data known at 90 days can be obtained using the
<code><a href="../reference/data_at_time_t.html">data_at_time_t()</a></code> function as follows:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_90</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/data_at_time_t.html">data_at_time_t</a></span><span class="op">(</span></span>
<span>    prepared_data <span class="op">=</span> <span class="va">prepared_final_data</span>,</span>
<span>    study_time <span class="op">=</span> <span class="fl">90</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Consider 90 days after study initiation:</p>
<ul>
<li>Participant 1 is known to have missed their first post-randomization
assessment: <code>.r_1</code> is <code>0</code>
</li>
<li>Participants 2-5 have had their first post-randomization outcome
obtained: <code>.r_1</code> is <code>1</code>
</li>
<li>Participant 6 missed their first post-randomization assessment, but
this is not yet known at day 90: <code>.r_1</code> is
<code>NA</code>
</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">show_cols</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">".id"</span>, <span class="st">"x_2"</span>, <span class="st">"x_3"</span>, <span class="st">"x_4"</span>, <span class="st">"tx"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Original Data</span></span>
<span><span class="va">data_90</span><span class="op">$</span><span class="va">original_data</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">show_cols</span>, <span class="st">".enrollment_time"</span>, <span class="st">".t_1"</span>, <span class="st">"y_1"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt;   .id        x_2        x_3        x_4 tx .enrollment_time     .t_1       y_1</span></span>
<span><span class="co">#&gt; 1   1  0.1971432 -0.8425884  0.2794844  0         33.28136 77.28136        NA</span></span>
<span><span class="co">#&gt; 2   2 -0.7384296  0.1315016 -1.2419134  0         33.69242 74.02729 -2.376967</span></span>
<span><span class="co">#&gt; 3   3  0.4997821  1.6932555 -0.4063889  1         37.69694 73.32954  2.094655</span></span>
<span><span class="co">#&gt; 4   4 -0.2189937 -1.7719120  0.1936013  1         39.40100 78.95480 -6.433176</span></span>
<span><span class="co">#&gt; 5   5  0.9282685  0.8078133  0.9317145  1         41.32190 71.43593  5.653307</span></span>
<span><span class="co">#&gt; 6   6  1.1756811  0.0226265 -0.2556343  0         55.24537 99.24537        NA</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Data known at study day 90</span></span>
<span><span class="va">data_90</span><span class="op">$</span><span class="va">data</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">show_cols</span>, <span class="st">".e"</span>, <span class="st">".t_1"</span>, <span class="st">"y_1"</span>, <span class="st">".r_1"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt;   .id        x_2        x_3        x_4 tx       .e     .t_1       y_1 .r_1</span></span>
<span><span class="co">#&gt; 1   1  0.1971432 -0.8425884  0.2794844  0 33.28136 77.28136        NA    0</span></span>
<span><span class="co">#&gt; 2   2 -0.7384296  0.1315016 -1.2419134  0 33.69242 74.02729 -2.376967    1</span></span>
<span><span class="co">#&gt; 3   3  0.4997821  1.6932555 -0.4063889  1 37.69694 73.32954  2.094655    1</span></span>
<span><span class="co">#&gt; 4   4 -0.2189937 -1.7719120  0.1936013  1 39.40100 78.95480 -6.433176    1</span></span>
<span><span class="co">#&gt; 5   5  0.9282685  0.8078133  0.9317145  1 41.32190 71.43593  5.653307    1</span></span>
<span><span class="co">#&gt; 6   6  1.1756811  0.0226265 -0.2556343  0 55.24537       NA        NA   NA</span></span></code></pre></div>
<p>If <code>observe_missing_times</code> were set to <code>0</code> for
each outcome, any outcome that is <code>NA</code> and has a recorded
time of assessment will be treated as missing.</p>
</div>
<div class="section level3">
<h3 id="plotting-observed-number-of-outcomes">Plotting Observed Number of Outcomes<a class="anchor" aria-label="anchor" href="#plotting-observed-number-of-outcomes"></a>
</h3>
<p>One part of monitoring involves determining how many individuals
contribute a given type of information to analyses, including baseline
covariates, intermediate outcomes, and final outcomes. For binary and
time-to-event analyses, monitoring should include the number of observed
events, not just the number of participants who have completed
monitoring.</p>
<p>Plotting can be done for all available events:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot events at the end of the study</span></span>
<span><span class="fu"><a href="../reference/plot_outcome_counts.html">plot_outcome_counts</a></span><span class="op">(</span></span>
<span>  prepared_data <span class="op">=</span> <span class="va">prepared_final_data</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="impart_monitoring_files/figure-html/Plot%20Entire%20Study-1.png" width="80%" style="display: block; margin: auto;"></p>
<p>Plotting can also be done for events known at a particular point in
time:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot events two years into the study</span></span>
<span><span class="fu"><a href="../reference/plot_outcome_counts.html">plot_outcome_counts</a></span><span class="op">(</span></span>
<span>  prepared_data <span class="op">=</span> <span class="va">prepared_final_data</span>,</span>
<span>  study_time <span class="op">=</span> <span class="fl">731</span> <span class="co"># 2 Years</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="impart_monitoring_files/figure-html/Plot%20Data%20Up%20To%20Timepoint-1.png" width="80%" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="tabulating-event-times">Tabulating Event Times<a class="anchor" aria-label="anchor" href="#tabulating-event-times"></a>
</h3>
<p>The times of each event can be obtained using
<code>count_outcomes</code>:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">example_1_counts_2y</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/count_outcomes.html">count_outcomes</a></span><span class="op">(</span></span>
<span>    prepared_data <span class="op">=</span> <span class="va">prepared_final_data</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Timing of first n randomizations</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span></span>
<span>  <span class="va">example_1_counts_2y</span>,</span>
<span>  <span class="va">event</span> <span class="op">==</span> <span class="st">"randomization"</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;           event     time count_total count_complete</span></span>
<span><span class="co">#&gt; 1 randomization 33.28136           1              1</span></span>
<span><span class="co">#&gt; 2 randomization 33.69242           2              2</span></span>
<span><span class="co">#&gt; 3 randomization 37.69694           3              3</span></span>
<span><span class="co">#&gt; 4 randomization 39.40100           4              4</span></span>
<span><span class="co">#&gt; 5 randomization 41.32190           5              5</span></span>
<span><span class="co">#&gt; 6 randomization 55.24537           6              6</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Timing of first n observations of `y_4`</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span></span>
<span>  <span class="va">example_1_counts_2y</span>,</span>
<span>  <span class="va">event</span> <span class="op">==</span> <span class="st">"y_4"</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;      event     time count_total count_complete</span></span>
<span><span class="co">#&gt; 516    y_4 150.4507           1              1</span></span>
<span><span class="co">#&gt; 316    y_4 152.6411           2              2</span></span>
<span><span class="co">#&gt; 416    y_4 156.4938           3              3</span></span>
<span><span class="co">#&gt; 1106   y_4 167.2814           4             NA</span></span>
<span><span class="co">#&gt; 284    y_4 167.6924           5             NA</span></span>
<span><span class="co">#&gt; 716    y_4 171.0864           6              4</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Find when n observations of `y_4` are first available:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span></span>
<span>  <span class="va">example_1_counts_2y</span>,</span>
<span>  <span class="va">event</span> <span class="op">==</span> <span class="st">"y_4"</span> <span class="op">&amp;</span> <span class="va">count_complete</span> <span class="op">==</span> <span class="fl">50</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt;     event     time count_total count_complete</span></span>
<span><span class="co">#&gt; 654   y_4 645.8408          65             50</span></span></code></pre></div>
<p>This can also be used with <code>data_at_time_t</code> to reconstruct
the study data when a particular number of observations have
accrued:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Reconstruct the data when N = 50 final outcomes were obtained</span></span>
<span><span class="va">data_n_final_50</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/data_at_time_t.html">data_at_time_t</a></span><span class="op">(</span></span>
<span>    prepared_data <span class="op">=</span> <span class="va">prepared_final_data</span>,</span>
<span>    study_time <span class="op">=</span> </span>
<span>      <span class="co"># Time when 50 final outcomes are observed:</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">ceiling</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span></span>
<span>          <span class="va">example_1_counts_2y</span>,</span>
<span>          <span class="va">event</span> <span class="op">==</span> <span class="st">"y_4"</span> <span class="op">&amp;</span> <span class="va">count_complete</span> <span class="op">==</span> <span class="fl">50</span></span>
<span>        <span class="op">)</span><span class="op">$</span><span class="va">time</span></span>
<span>      <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">data_n_50</span> <span class="op">&lt;-</span> <span class="va">data_n_final_50</span><span class="op">$</span><span class="va">data</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="monitoring-information-levels">Monitoring Information Levels<a class="anchor" aria-label="anchor" href="#monitoring-information-levels"></a>
</h2>
<p>Information can be computed using the
<code>estimate_information</code> function: users pass the function
which conducts the analysis (<code>estimation_function</code>), along
with a list of parameters the function requires
(<code>estimation_arguments</code>). When there are multiple analyses,
the <code>orthogonalize</code> argument specifies whether the test
statistics and covariance should be orthogonalized to meet the
independent increments assumption. A random number generator seed
(<code>rng_seed</code>) can be supplied for reproducibility. By default,
only the variance and information are returned, which can be compared
against the target information level for analyses:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">information_n_50</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/estimate_information.html">estimate_information</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">data_n_50</span>,</span>
<span>    monitored_design <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    estimation_function <span class="op">=</span> <span class="va">standardization</span>,</span>
<span>    estimation_arguments <span class="op">=</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        estimand <span class="op">=</span> <span class="st">"difference"</span>,</span>
<span>        y0_formula <span class="op">=</span> <span class="va">y_4</span> <span class="op">~</span> <span class="va">x_1</span> <span class="op">+</span> <span class="va">x_2</span> <span class="op">+</span> <span class="va">x_3</span> <span class="op">+</span> <span class="va">x_4</span>,</span>
<span>        y1_formula <span class="op">=</span> <span class="va">y_4</span> <span class="op">~</span> <span class="va">x_1</span> <span class="op">+</span> <span class="va">x_2</span> <span class="op">+</span> <span class="va">x_3</span> <span class="op">+</span> <span class="va">x_4</span>,</span>
<span>        family <span class="op">=</span> <span class="va">gaussian</span>,</span>
<span>        treatment_column <span class="op">=</span> <span class="st">"tx"</span>,</span>
<span>        outcome_indicator_column <span class="op">=</span> <span class="st">".r_4"</span></span>
<span>      <span class="op">)</span>,</span>
<span>    orthogonalize <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    rng_seed <span class="op">=</span> <span class="fl">23456</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">information_n_50</span></span>
<span><span class="co">#&gt; $estimates</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $covariance</span></span>
<span><span class="co">#&gt;           estimates</span></span>
<span><span class="co">#&gt; estimates  7.851968</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $information</span></span>
<span><span class="co">#&gt; estimates </span></span>
<span><span class="co">#&gt; 0.1273566 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $estimates_orthogonal</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $covariance_orthogonal</span></span>
<span><span class="co">#&gt;           estimates</span></span>
<span><span class="co">#&gt; estimates  7.851968</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $information_orthogonal</span></span>
<span><span class="co">#&gt; estimates </span></span>
<span><span class="co">#&gt; 0.1273566 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $ids_by_analysis</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $bootstrap_results</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $bootstrap_ids</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $analysis_label</span></span>
<span><span class="co">#&gt; [1] "monitoring_check"</span></span></code></pre></div>
<p>When a study is designed with interim and final analyses,
<code>monitored_design</code> allows the user to pass the results of
previously conducted analyses to <code>estimate_information</code>.</p>
<p>Using the design specified in the <code>impart_study_design</code>
vignette:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Universal Study Design Parameters</span></span>
<span><span class="va">minimum_difference</span> <span class="op">&lt;-</span> <span class="fl">5</span> <span class="co"># Effect Size: Difference in Means of 5 or greater</span></span>
<span><span class="va">alpha</span> <span class="op">&lt;-</span> <span class="fl">0.05</span> <span class="co"># Type I Error Rate</span></span>
<span><span class="va">power</span> <span class="op">&lt;-</span> <span class="fl">0.9</span> <span class="co"># Statistical Power</span></span>
<span><span class="va">test_sides</span> <span class="op">&lt;-</span> <span class="fl">2</span> <span class="co"># Direction of Alternatives</span></span>
<span></span>
<span><span class="co"># Determine information required to achieve desired power at fixed error rate</span></span>
<span><span class="va">information_fixed</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">impart</span><span class="fu">::</span><span class="fu"><a href="../reference/required_info.html">required_information_fixed_n</a></span><span class="op">(</span></span>
<span>    delta <span class="op">=</span> <span class="va">minimum_difference</span>,</span>
<span>    alpha <span class="op">=</span> <span class="va">alpha</span>,</span>
<span>    power <span class="op">=</span> <span class="va">power</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Group Sequential Design Parameters</span></span>
<span><span class="va">information_rates</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.50</span>, <span class="fl">0.75</span>, <span class="fl">1.00</span><span class="op">)</span> <span class="co"># Analyses at 50%, 75%, and 100% of the Total Information</span></span>
<span><span class="va">type_of_design</span> <span class="op">&lt;-</span> <span class="st">"asOF"</span> <span class="co"># O'Brien-Fleming Alpha Spending</span></span>
<span><span class="va">type_beta_spending</span> <span class="op">&lt;-</span> <span class="st">"bsOF"</span> <span class="co"># O'Brien-Fleming Beta Spending</span></span>
<span></span>
<span><span class="co"># Set up group sequential testing procedure</span></span>
<span><span class="va">trial_design</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">rpact</span><span class="fu">::</span><span class="fu"><a href="https://rpact-com.github.io/rpact/reference/getDesignGroupSequential.html" class="external-link">getDesignGroupSequential</a></span><span class="op">(</span></span>
<span>    alpha <span class="op">=</span> <span class="va">alpha</span>,</span>
<span>    beta <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">power</span>,</span>
<span>    sided <span class="op">=</span> <span class="fl">2</span>,</span>
<span>    informationRates <span class="op">=</span> <span class="va">information_rates</span>,</span>
<span>    typeOfDesign <span class="op">=</span> <span class="va">type_of_design</span>,</span>
<span>    typeBetaSpending <span class="op">=</span> <span class="va">type_beta_spending</span>,</span>
<span>    bindingFutility <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Inflate information level to account for multiple testing</span></span>
<span><span class="va">information_adaptive</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">impart</span><span class="fu">::</span><span class="fu"><a href="../reference/required_information_sequential.html">required_information_sequential</a></span><span class="op">(</span></span>
<span>    information_fixed <span class="op">=</span> <span class="va">information_fixed</span>,</span>
<span>    trial_design <span class="op">=</span> <span class="va">trial_design</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Initialize the monitored design</span></span>
<span><span class="va">monitored_design</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/initialize_monitored_design.html">initialize_monitored_design</a></span><span class="op">(</span></span>
<span>    trial_design <span class="op">=</span> <span class="va">trial_design</span>,</span>
<span>    null_value <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    maximum_sample_size <span class="op">=</span> <span class="fl">280</span>,</span>
<span>    information_target <span class="op">=</span> <span class="va">information_adaptive</span>,</span>
<span>    orthogonalize <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    rng_seed_analysis <span class="op">=</span> <span class="fl">54321</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>The current information can be computed:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">information_n_50</span><span class="op">$</span><span class="va">information</span><span class="op">/</span><span class="va">information_adaptive</span></span>
<span><span class="co">#&gt; estimates </span></span>
<span><span class="co">#&gt; 0.2793958</span></span></code></pre></div>
<div class="section level3">
<h3 id="tools-for-monitoring-information">Tools for Monitoring Information<a class="anchor" aria-label="anchor" href="#tools-for-monitoring-information"></a>
</h3>
<p>While <code>estimate_information</code> can provide an estimate of
the information at a particular point in the study, understanding the
rate at which information is accruing over time can be useful in
projecting when pre-specified information levels may be met:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_n_50_trajectory</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/information_trajectory.html">information_trajectory</a></span><span class="op">(</span></span>
<span>    prepared_data <span class="op">=</span> <span class="va">data_n_final_50</span>,</span>
<span>    monitored_design <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    estimation_function <span class="op">=</span> <span class="va">standardization</span>,</span>
<span>    estimation_arguments <span class="op">=</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        estimand <span class="op">=</span> <span class="st">"difference"</span>,</span>
<span>        y0_formula <span class="op">=</span> <span class="va">y_4</span> <span class="op">~</span> <span class="va">x_1</span> <span class="op">+</span> <span class="va">x_2</span> <span class="op">+</span> <span class="va">x_3</span> <span class="op">+</span> <span class="va">x_4</span>,</span>
<span>        y1_formula <span class="op">=</span> <span class="va">y_4</span> <span class="op">~</span> <span class="va">x_1</span> <span class="op">+</span> <span class="va">x_2</span> <span class="op">+</span> <span class="va">x_3</span> <span class="op">+</span> <span class="va">x_4</span>,</span>
<span>        family <span class="op">=</span> <span class="va">gaussian</span>,</span>
<span>        treatment_column <span class="op">=</span> <span class="st">"tx"</span>,</span>
<span>        outcome_indicator_column <span class="op">=</span> <span class="st">".r_4"</span></span>
<span>      <span class="op">)</span>,</span>
<span>    orthogonalize <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    n_min <span class="op">=</span> <span class="fl">30</span>,</span>
<span>    n_increment <span class="op">=</span> <span class="fl">2</span>,</span>
<span>    rng_seed <span class="op">=</span> <span class="fl">23456</span>,</span>
<span>    control <span class="op">=</span> <span class="fu"><a href="../reference/monitored_analysis_control.html">monitored_analysis_control</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">data_n_50_trajectory</span></span>
<span><span class="co">#&gt;       times randomization y_1 y_2 y_3 y_4 information information_lag_1</span></span>
<span><span class="co">#&gt; 1  453.1467            56  44  41  36  30 0.020000052                NA</span></span>
<span><span class="co">#&gt; 2  466.1324            58  47  42  37  32 0.027924235       0.020000052</span></span>
<span><span class="co">#&gt; 3  468.1530            58  47  42  37  34 0.004445449       0.027924235</span></span>
<span><span class="co">#&gt; 4  479.5912            59  48  42  38  36 0.094454272       0.004445449</span></span>
<span><span class="co">#&gt; 5  511.2584            64  52  47  41  38 0.093529678       0.094454272</span></span>
<span><span class="co">#&gt; 6  514.7433            64  52  47  41  40 0.103464416       0.093529678</span></span>
<span><span class="co">#&gt; 7  540.2434            70  55  50  45  42 0.096571778       0.103464416</span></span>
<span><span class="co">#&gt; 8  558.8427            74  59  50  47  44 0.128584626       0.096571778</span></span>
<span><span class="co">#&gt; 9  567.3874            75  61  50  48  46 0.114035086       0.128584626</span></span>
<span><span class="co">#&gt; 10 609.9576            79  66  58  51  48 0.113310973       0.114035086</span></span>
<span><span class="co">#&gt; 11 645.8408            84  68  62  56  50 0.128125172       0.113310973</span></span>
<span><span class="co">#&gt;    information_change information_pct_change</span></span>
<span><span class="co">#&gt; 1                  NA                     NA</span></span>
<span><span class="co">#&gt; 2        0.0079241825             28.3774384</span></span>
<span><span class="co">#&gt; 3       -0.0234787856           -528.1532874</span></span>
<span><span class="co">#&gt; 4        0.0900088226             95.2935436</span></span>
<span><span class="co">#&gt; 5       -0.0009245935             -0.9885563</span></span>
<span><span class="co">#&gt; 6        0.0099347379              9.6020818</span></span>
<span><span class="co">#&gt; 7       -0.0068926377             -7.1373209</span></span>
<span><span class="co">#&gt; 8        0.0320128482             24.8963263</span></span>
<span><span class="co">#&gt; 9       -0.0145495402            -12.7588277</span></span>
<span><span class="co">#&gt; 10      -0.0007241130             -0.6390493</span></span>
<span><span class="co">#&gt; 11       0.0148141990             11.5622861</span></span></code></pre></div>
<p>This trajectory can be smoothed using regression, ideally using a
method resistant to outliers, such as <code><a href="https://rdrr.io/pkg/deming/man/theilsen.html" class="external-link">deming::theilsen</a></code>.
Inverse regression can be used to obtain an estimated number of outcomes
necessary to achieve a given level of information:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">information</span> <span class="op">~</span> <span class="va">y_4</span>,</span>
<span>  data <span class="op">=</span> <span class="va">data_n_50_trajectory</span>,</span>
<span>  xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html" class="external-link">abline</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span>formula <span class="op">=</span> <span class="va">information</span> <span class="op">~</span> <span class="va">y_4</span>,</span>
<span>     data <span class="op">=</span> <span class="va">data_n_50_trajectory</span><span class="op">)</span>,</span>
<span>  lty <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">last_high_pct_change</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">data_n_50_trajectory</span><span class="op">$</span><span class="va">information_pct_change</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">30</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">keep_rows</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">last_high_pct_change</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_n_50_trajectory</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Keep only the rows where the percentage change in information is stable</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html" class="external-link">abline</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span></span>
<span>    formula <span class="op">=</span> <span class="va">information</span> <span class="op">~</span> <span class="va">y_4</span>,</span>
<span>    data <span class="op">=</span> <span class="va">data_n_50_trajectory</span><span class="op">[</span><span class="va">keep_rows</span>,<span class="op">]</span></span>
<span>  <span class="op">)</span>,</span>
<span>  lty <span class="op">=</span> <span class="fl">2</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Requires `deming` package</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html" class="external-link">abline</a></span><span class="op">(</span></span>
<span>  <span class="fu">deming</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/deming/man/theilsen.html" class="external-link">theilsen</a></span><span class="op">(</span></span>
<span>    formula <span class="op">=</span> <span class="va">information</span> <span class="op">~</span> <span class="va">y_4</span>,</span>
<span>    data <span class="op">=</span> <span class="va">data_n_50_trajectory</span><span class="op">[</span><span class="va">keep_rows</span>,<span class="op">]</span></span>
<span>  <span class="op">)</span>,</span>
<span>  lty <span class="op">=</span> <span class="fl">3</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="impart_monitoring_files/figure-html/Plot%20Trajectory-1.png" width="80%" style="display: block; margin: auto;"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by The package maintainer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
